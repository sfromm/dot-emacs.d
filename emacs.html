<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Emacs configuration</title>
<!-- 2015-04-03 Fri 13:49 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Stephen Fromm" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Emacs Configuration</a>
<ul>
<li><a href="#sec-1-1">1.1. About this file</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. License</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Set up init.el</a></li>
<li><a href="#sec-1-3">1.3. Personal information</a></li>
<li><a href="#sec-1-4">1.4. Emacs initialization</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. Add package sources</a></li>
<li><a href="#sec-1-4-2">1.4.2. Install packages if necessary</a></li>
<li><a href="#sec-1-4-3">1.4.3. Define lisp directories and Use use-package</a></li>
<li><a href="#sec-1-4-4">1.4.4. Funtions and other building blocks</a></li>
<li><a href="#sec-1-4-5">1.4.5. <span class="done DONE">DONE</span> Load encrypted secrets</a>
<ul>
<li><a href="#sec-1-4-5-1">1.4.5.1. <span class="done CANCELLED">CANCELLED</span> Consider using <code>gpg-agent</code> and public key encryption</a></li>
<li><a href="#sec-1-4-5-2">1.4.5.2. <span class="done CANCELLED">CANCELLED</span> Consider loading secrets file on demand</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Org mode</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. Contacts</a></li>
<li><a href="#sec-1-5-2">1.5.2. Pomodoro</a></li>
<li><a href="#sec-1-5-3">1.5.3. Babel mode</a></li>
<li><a href="#sec-1-5-4">1.5.4. Exporting</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6. Packages</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. Emacs vi emulation</a></li>
<li><a href="#sec-1-6-2">1.6.2. BBDB</a></li>
<li><a href="#sec-1-6-3">1.6.3. Bookmarks</a></li>
<li><a href="#sec-1-6-4">1.6.4. Diminish</a></li>
<li><a href="#sec-1-6-5">1.6.5. Ediff</a></li>
<li><a href="#sec-1-6-6">1.6.6. Elfeed</a></li>
<li><a href="#sec-1-6-7">1.6.7. Emacsclient and server</a></li>
<li><a href="#sec-1-6-8">1.6.8. Helm</a></li>
<li><a href="#sec-1-6-9">1.6.9. Hydra - Making Emacs bindings stick around</a></li>
<li><a href="#sec-1-6-10">1.6.10. IDO</a></li>
<li><a href="#sec-1-6-11">1.6.11. Instant messaging: jabber &amp; irc</a>
<ul>
<li><a href="#sec-1-6-11-1">1.6.11.1. Jabber</a></li>
<li><a href="#sec-1-6-11-2">1.6.11.2. IRC</a></li>
</ul>
</li>
<li><a href="#sec-1-6-12">1.6.12. Ledger</a></li>
<li><a href="#sec-1-6-13">1.6.13. magit</a></li>
<li><a href="#sec-1-6-14">1.6.14. Music with EMMS</a></li>
<li><a href="#sec-1-6-15">1.6.15. Powerline</a></li>
<li><a href="#sec-1-6-16">1.6.16. Terminals</a></li>
<li><a href="#sec-1-6-17">1.6.17. Tmux integration</a></li>
<li><a href="#sec-1-6-18">1.6.18. Twitter</a></li>
<li><a href="#sec-1-6-19">1.6.19. Window Management</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7. General configuration</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1. Basics</a></li>
<li><a href="#sec-1-7-2">1.7.2. Backups</a></li>
<li><a href="#sec-1-7-3">1.7.3. Saving and History</a></li>
<li><a href="#sec-1-7-4">1.7.4. Appearance</a></li>
<li><a href="#sec-1-7-5">1.7.5. Themes</a></li>
<li><a href="#sec-1-7-6">1.7.6. Fonts</a></li>
<li><a href="#sec-1-7-7">1.7.7. Behavior</a>
<ul>
<li><a href="#sec-1-7-7-1">1.7.7.1. Buffers</a></li>
<li><a href="#sec-1-7-7-2">1.7.7.2. Windows</a></li>
<li><a href="#sec-1-7-7-3">1.7.7.3. Mouse</a></li>
<li><a href="#sec-1-7-7-4">1.7.7.4. General</a></li>
<li><a href="#sec-1-7-7-5">1.7.7.5. <span class="done DONE">DONE</span> Making opening files easier</a></li>
<li><a href="#sec-1-7-7-6">1.7.7.6. Helpers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-8">1.8. Programming and Editing</a>
<ul>
<li><a href="#sec-1-8-1">1.8.1. Basics</a></li>
<li><a href="#sec-1-8-2">1.8.2. Lisp</a></li>
<li><a href="#sec-1-8-3">1.8.3. Lua</a></li>
<li><a href="#sec-1-8-4">1.8.4. Markdown</a></li>
<li><a href="#sec-1-8-5">1.8.5. Python</a></li>
<li><a href="#sec-1-8-6">1.8.6. Shell scripts</a></li>
<li><a href="#sec-1-8-7">1.8.7. Text</a></li>
<li><a href="#sec-1-8-8">1.8.8. YAML</a></li>
<li><a href="#sec-1-8-9">1.8.9. JSON</a></li>
</ul>
</li>
<li><a href="#sec-1-9">1.9. Mail configuration</a>
<ul>
<li><a href="#sec-1-9-1">1.9.1. General</a></li>
<li><a href="#sec-1-9-2">1.9.2. Sending email</a></li>
<li><a href="#sec-1-9-3">1.9.3. Mutt</a></li>
<li><a href="#sec-1-9-4">1.9.4. Multiple identities</a></li>
<li><a href="#sec-1-9-5">1.9.5. offlineimap</a></li>
<li><a href="#sec-1-9-6">1.9.6. notmuch</a></li>
<li><a href="#sec-1-9-7">1.9.7. mu4e</a></li>
<li><a href="#sec-1-9-8">1.9.8. vm</a></li>
<li><a href="#sec-1-9-9">1.9.9. gnus</a>
<ul>
<li><a href="#sec-1-9-9-1">1.9.9.1. Group buffer</a></li>
<li><a href="#sec-1-9-9-2">1.9.9.2. Server buffer</a></li>
<li><a href="#sec-1-9-9-3">1.9.9.3. Summary buffer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-10">1.10. Le Fin</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Emacs Configuration</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> About this file</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a id="babel-init" name="babel-init"></a>
</p>

<p>
This is my Emacs configuration (mostly) maintained in one file, that is
kept organized with <b>org-mode</b>. It is inspired from a variety of
sources, including (in no particular order):
</p>

<ul class="org-ul">
<li><a href="http://sachachua.com/blog/">Sacha Chua</a>'s <a href="http://sachac.github.io/.emacs.d/Sacha.html">emacs configuration</a>
</li>
<li><a href="http://eschulte.github.io/emacs24-starter-kit/">Emacs Starter Kit</a>
</li>
<li><a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html">Creation and conservation of computer files</a>, and later <a href="https://github.com/grettke/home/blob/master/ALEC.org">ALEC</a>
</li>
<li><a href="http://kitchingroup.cheme.cmu.edu/blog/">John Kitchin</a>'s <a href="https://github.com/jkitchin/jmax">emacs configuration</a>
</li>
<li><a href="http://doc.norang.ca/org-mode.html">Bernt Hansen (norang.ca) Org Mode</a> (Organize Your Life in Plain Text)
</li>
<li><a href="http://www.djcbsoftware.nl/dot-emacs.html">DJCB (EmacsWiki)</a>
</li>
<li><a href="http://bzg.fr/emacs.html">Bastien Guerry</a>
</li>
<li><a href="https://github.com/larstvei/dot-emacs">Lars Tveito</a>
</li>
<li><a href="https://github.com/purcell/emacs.d">Steve Purcell</a>
</li>
<li><a href="http://zeekat.nl/articles/making-emacs-work-for-me.html">Making Emacs work for me</a>
</li>
<li><a href="https://github.com/howardabrams/dot-files">Howard Abrams</a>
</li>
<li><a href="https://github.com/jd/emacs.d">Julien Danjou</a>
</li>
<li><a href="https://github.com/joedicastro/dotfiles/tree/master/emacs">Joe Di Castro</a>
</li>
<li><a href="http://org.rix.si/">Ryan Rix</a>'s <a href="http://doc.rix.si/org/fsem.html">Hardcore Freestyle Emacs</a>
</li>
</ul>

<p>
Embedding Emacs configuration in <b>org-mode</b> is heavily inspired by the
ideas in <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a>.
</p>

<p>
This will hopefully lend itself better to explain and track why I
use different elements in my configuration, including discussion,
comments, todo items, and so on.
</p>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> License</h4>
<div class="outline-text-4" id="text-1-1-1">
<pre class="example">
Copyright (C) 2014-2015 Stephen Fromm

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.

Code in this document is free software: you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation, either
version 3 of the License, or (at your option) any later version.

This code is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
</pre>

<p>
This document is licensed under the GNU Free Documentation License
version 1.3 or later (<a href="http://www.gnu.org/copyleft/fdl.html">http://www.gnu.org/copyleft/fdl.html</a>).
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Set up init.el</h3>
<div class="outline-text-3" id="text-1-2">
<p>
First thing's first: a base config is needed in <code>~/.emacs.d/init.el</code>.
Remember to keep this simple.  :-)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">package</span>
(package-initialize t)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">org</span>)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">ob-tangle</span>)

<span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">load up private configuration</span>
(<span style="color: #0000FF;">if</span> (file-exists-p (concat user-emacs-directory <span style="color: #008000;">"private.org"</span>))
  (org-babel-load-file (concat user-emacs-directory <span style="color: #008000;">"private.org"</span>))
  )

<span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">load up the bulk of my configuration</span>
(org-babel-load-file (concat user-emacs-directory <span style="color: #008000;">"emacs.org"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Personal information</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Set my name.  <code>user-mail-address</code> is defined in <i>private.org</i>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name <span style="color: #008000;">"Stephen Fromm"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Emacs initialization</h3>
<div class="outline-text-3" id="text-1-4">
<p>
The first time this file is loaded, it will take awhile to install the
miscellaneous packages.  This will not be an issue the second time you
start Emacs with this configuration.
</p>
</div>

<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Add package sources</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Use <code>M-x package-refresh-contents</code> to reload the list of packages
after adding these for the first time.
</p>

<p>
MELPA is probably the more popular package repository.  It also has lots
of packages compared to other repositories.  Be aware that MELPA uses
snapshots instead of 'stable' releases.
</p>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2014-05-16 Fri]</span></span> <a href="http://emacsredux.com/blog/2014/05/16/melpa-stable/">Turns out</a> that there is also a <a href="http://melpa-stable.milkbox.net/#/">MELPA stable</a>.  I
should add that to the <code>package-archive</code> list.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq package-archives '(
                         (<span style="color: #008000;">"org"</span> . <span style="color: #008000;">"http://orgmode.org/elpa/"</span>)
                         (<span style="color: #008000;">"melpa"</span> . <span style="color: #008000;">"http://melpa.org/packages/"</span>)
                         (<span style="color: #008000;">"gnu"</span> . <span style="color: #008000;">"http://elpa.gnu.org/packages/"</span>)
                         (<span style="color: #008000;">"marmalade"</span> . <span style="color: #008000;">"http://marmalade-repo.org/packages/"</span>)
                         (<span style="color: #008000;">"e6h"</span> . <span style="color: #008000;">"http://www.e6h.org/packages/"</span>)
                         ))
(package-initialize)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">package</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Install packages if necessary</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
ELPA provides a nice resource to install packages.  The following
function facilitates installing packages from ELPA.  It will refresh the
package database before trying to install a package.
</p>

<p>
Further down, I also use the feature from <code>use-package</code> where it can
install a package.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/package-install</span> (package)
  <span style="color: #036A07;">"Install PACKAGE it not yet installed."</span>
  (<span style="color: #0000FF;">unless</span> (package-installed-p package)
    (message <span style="color: #008000;">"%s"</span> <span style="color: #008000;">"Refreshing package database..."</span>)
    (package-refresh-contents)
    (message <span style="color: #008000;">"%s"</span> <span style="color: #008000;">" done."</span>)
    (package-install package)
    (delete-other-windows)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-3" class="outline-4">
<h4 id="sec-1-4-3"><span class="section-number-4">1.4.3</span> Define lisp directories and Use use-package</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
The following directories have lisp files that I will user later on.
Best to load them now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path <span style="color: #008000;">"~/.emacs.d/site-lisp"</span>)
</pre>
</div>

<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> is a declaration macro that allows you to isolate package
configuration in your Emacs configuration.  This <a href="http://ericjmritz.name/2013/11/25/simplify-emacs-configuration-with-use-package/">page</a> provides an
example of how to use <code>use-package</code>.  Don't forget the <a href="https://github.com/jwiegley/use-package/blob/master/README.md">documentation</a> for
<b>use-package</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'use-package)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">use-package</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-4" class="outline-4">
<h4 id="sec-1-4-4"><span class="section-number-4">1.4.4</span> Funtions and other building blocks</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
Pull in some packages that will be useful later.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">cl</span>)
</pre>
</div>

<p>
Define a function that will switch to the last used buffer.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/switch-to-last-buffer</span> ()
  (interactive)
  (switch-to-buffer (other-buffer (current-buffer) 1)))
</pre>
</div>

<p>
Save all buffers and then run <code>depot-sync.sh</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/save-all</span> ()
  (interactive)
  (<span style="color: #0000FF;">progn</span>
    (message <span style="color: #008000;">"Saving buffers at %s"</span> (format-time-string <span style="color: #008000;">"%Y-%m-%dT%T"</span>))
    (save-some-buffers t)
    <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">(with-temp-buffer (async-shell-command "depot-sync.sh" t))</span>
    ))
</pre>
</div>

<p>
Define function that will disable <code>global-linum</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/nolinum</span> ()
  <span style="color: #036A07;">"Disable global-linum-mode"</span>
  (global-linum-mode 0))
</pre>
</div>

<p>
Function to create a full ISO 8601 format timestamp.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/timestamp</span> ()
  <span style="color: #036A07;">"Insert full ISO 8601 format timestamp"</span>
  (interactive)
  (insert (format-time-string <span style="color: #008000;">"%Y-%m-%dT%T%z"</span>)))
</pre>
</div>

<p>
Toggle whitespace cues.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/whitespace</span> ()
  <span style="color: #036A07;">"Enable whitespace visualizations"</span>
  (setq highlight-tabs t)
  (setq show-trailing-whitespace t))
</pre>
</div>

<p>
While it is pretty straightforward to update packages via
<code>list-packages</code> (via <code>U x</code>), the following function makes it perhaps a
little easier.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/update-packages</span> ()
  <span style="color: #036A07;">"update all installed packages"</span>
  (<span style="color: #0000FF;">save-window-excursion</span>
    (package-list-packages t)
    (package-menu-mark-upgrades)
    (package-menu-execute t)
    (message <span style="color: #008000;">"packages updated"</span>)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-5" class="outline-4">
<h4 id="sec-1-4-5"><span class="section-number-4">1.4.5</span> <span class="done DONE">DONE</span> Load encrypted secrets</h4>
<div class="outline-text-4" id="text-1-4-5">
<p>
<a id="emacs-secrets" name="emacs-secrets"></a>
</p>

<p>
The following uses <a href="http://www.gnu.org/software/emacs/manual/html_mono/epa.html">EasyPG Assistant</a> for the encryption.  This enables
you to store secrets (aka passwords) in a separate, encrypted file that
is loaded when needed.
</p>

<p>
I updated this to be in a function so that it doesn't prompt right away
when starting Emacs.  This function can then be called by other parts as
needed.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84;">;  </span><span style="color: #8D8D84; font-style: italic;">(eval-after-load 'erc</span>
<span style="color: #8D8D84;">;    </span><span style="color: #8D8D84; font-style: italic;">(progn</span>
<span style="color: #8D8D84;">;      </span><span style="color: #8D8D84; font-style: italic;">(load-file (concat user-emacs-directory "secrets.el.gpg"))</span>
<span style="color: #8D8D84;">;    </span><span style="color: #8D8D84; font-style: italic;">))</span>
</pre>
</div>

<p>
The following was a helpful resource when setting this up.
</p>

<p>
<a href="http://emacs-fu.blogspot.com/2011/02/keeping-your-secrets-secret.html">http://emacs-fu.blogspot.com/2011/02/keeping-your-secrets-secret.html</a>
</p>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-03-12 Thu]</span></span> I don't really use this anymore.  For passwords, I
use an encrypted <i>authinfo</i>.  For <i>private.org</i>, I maintain that
separately.
</li>
</ul>
</div>

<div id="outline-container-sec-1-4-5-1" class="outline-5">
<h5 id="sec-1-4-5-1"><span class="section-number-5">1.4.5.1</span> <span class="done CANCELLED">CANCELLED</span> Consider using <code>gpg-agent</code> and public key encryption</h5>
<div class="outline-text-5" id="text-1-4-5-1">
</div>
</div>

<div id="outline-container-sec-1-4-5-2" class="outline-5">
<h5 id="sec-1-4-5-2"><span class="section-number-5">1.4.5.2</span> <span class="done CANCELLED">CANCELLED</span> Consider loading secrets file on demand</h5>
<div class="outline-text-5" id="text-1-4-5-2">
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Org mode</h3>
<div class="outline-text-3" id="text-1-5">
<p>
<a href="http://orgmode.org/">Org mode</a> is a big reason why I've switched back to Emacs.  I use it for
taking notes, tracking projects and todo items, and other miscellaneous
items.
</p>

<p>
First, install the latest and greatest.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'org-plus-contrib)
</pre>
</div>

<p>
The following does lots of things:
</p>

<ul class="org-ul">
<li>Enable spell-check when in <b>org-mode</b>.
</li>
<li>Define the default <code>org-directory</code>.
</li>
<li>Make agenda views <i>sticky</i> via <code>org-agenda-sticky</code>.  This basically
means that when you switch to <span class="underline">org-agenda</span>, Emacs will switch to the
<span class="underline">org-agenda</span> buffer but not refresh it.  You need to manually refresh
it by hand with <span class="underline">r</span> or <span class="underline">g</span>.
</li>
<li>Define where to capture notes (<code>org-default-notes-file</code>) and the
templates to use (<code>org-capture-templates</code>).
</li>
<li>Note when a task is rescheduled.
</li>
<li>This defines some basics like where and what files with
<code>org-agenda-files</code>.
</li>
<li>Use the current window when invoking <code>org-agenda</code>.
</li>
<li>And, just in case, restore windows after quitting <code>org-agenda</code>.
</li>
<li>Define <code>org-todo-keywords</code>.  This is discussed in the <a href="http://orgmode.org/manual/TODO-Items.html">manual</a>.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">org</span>
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (add-hook 'org-mode-hook 'turn-on-auto-fill)
    (add-hook 'org-mode-hook '(<span style="color: #0000FF;">lambda</span>() (set-fill-column 72)))
    (add-hook 'org-mode-hook 'turn-on-flyspell 'append)
    (add-to-list 'auto-mode-alist '(<span style="color: #008000;">"doc/org/.*\\.org$"</span> . org-mode))
    (setq
      org-directory <span style="color: #008000;">"~/depot/doc/org"</span>
      org-agenda-sticky t
      org-default-notes-file (concat org-directory <span style="color: #008000;">"/journal.org"</span>)
      org-id-link-to-org-use-id 'create-if-interactive-and-no-custom-id
      org-log-done t
      org-completion-use-ido t
      org-log-reschedule <span style="color: #008000;">"note"</span>
      org-agenda-files (list
                         (concat org-directory <span style="color: #008000;">"/journal.org"</span>)
                         (concat org-directory <span style="color: #008000;">"/work.org"</span>)
                         (concat org-directory <span style="color: #008000;">"/personal.org"</span>))
      org-agenda-restore-windows-after-quit t
      org-agenda-window-setup 'current-window
      org-capture-templates '(
                               (<span style="color: #008000;">"j"</span> <span style="color: #008000;">"Journal"</span> entry (file+datetree (concat org-directory <span style="color: #008000;">"/journal.org"</span>))
                                 <span style="color: #008000;">"* %?%U\n"</span>)
                               (<span style="color: #008000;">"l"</span> <span style="color: #008000;">"Student log"</span> entry (file (concat org-directory <span style="color: #008000;">"/student.org"</span>))
                                 <span style="color: #008000;">"** %U %^{Name} %^{In|Out} %?"</span>)
                               )
      org-file-apps (quote ((auto-mode . emacs)
                             (<span style="color: #008000;">"\\.doc\\'"</span> . <span style="color: #008000;">"ooffice %s"</span>)
                             (<span style="color: #008000;">"\\.docx\\'"</span> . <span style="color: #008000;">"ooffice %s"</span>)
                             (<span style="color: #008000;">"\\.xlsx\\'"</span> . <span style="color: #008000;">"ooffice %s"</span>)
                             (<span style="color: #008000;">"\\.pptx\\'"</span> . <span style="color: #008000;">"ooffice %s"</span>)
                             (<span style="color: #008000;">"\\.pdf\\'"</span> . default)))
      org-modules '(org-w3m org-bbdb
                     org-bibtex org-docview
                     org-gnus org-info
                     org-irc org-mhe org-rmail org-habit)
      org-src-window-setup 'current-window
      org-todo-keywords '(
                           (sequence <span style="color: #008000;">"TODO(t)"</span> <span style="color: #008000;">"WAITING(w)"</span> <span style="color: #008000;">"DELEGATED(l)"</span> <span style="color: #008000;">"|"</span> <span style="color: #008000;">"DONE(d)"</span>)
                           (sequence <span style="color: #008000;">"|"</span> <span style="color: #008000;">"CANCELLED(c)"</span>)
                           )
      )
    (org-load-modules-maybe t)
    )
  <span style="color: #006FE0;">:bind</span> ((<span style="color: #008000;">"&lt;f8&gt;"</span> . org-cycle-agenda-files)
          (<span style="color: #008000;">"&lt;f12&gt;"</span> . org-agenda)
          (<span style="color: #008000;">"C-c l"</span> . org-store-link)
          (<span style="color: #008000;">"C-c c"</span> . org-capture)
          (<span style="color: #008000;">"C-c a"</span> . org-agenda)
          (<span style="color: #008000;">"C-c b"</span> . org-switchb))
  )
</pre>
</div>

<p>
Finally, pull in <b>org-git-link</b> to reference git links.  More
information available <a href="http://orgmode.org/worg/org-contrib/org-git-link.html">here</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">org-git-link</span>)
</pre>
</div>
</div>

<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Contacts</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
Instead of tinkering with <b>BBDB</b>, which seemed to require more energy
than I want to commit, <b><a href="https://julien.danjou.info/projects/emacs-packages#org-contacts">org-contacts</a></b> looks like a good alternative.
It is <i>org-ish</i> which is also a plus.  If <span class="underline">org-contacts-files</span> is not
set, <b>org-contacts</b> will search all your Org files.  Since I'm storing
contacts elsewhere, this needs to be set.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">org-contacts</span>
    <span style="color: #006FE0;">:config</span>
    (<span style="color: #0000FF;">progn</span>
      (setq org-contacts-files (list  <span style="color: #008000;">"~/depot/doc/org/contacts.org"</span>))
      (push '(<span style="color: #008000;">"c"</span> <span style="color: #008000;">"Contacts"</span> entry (file (concat org-directory <span style="color: #008000;">"/contacts.org"</span>))
               <span style="color: #008000;">"* %(org-contacts-template-name)</span>
<span style="color: #008000;">:PROPERTIES:</span>
<span style="color: #008000;">:EMAIL: %(org-contacts-template-email)</span>
<span style="color: #008000;">:PHONE:</span>
<span style="color: #008000;">:ADDRESS:</span>
<span style="color: #008000;">:BIRTHDAY:</span>
<span style="color: #008000;">:END:"</span>) org-capture-templates)
      )
    )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> Pomodoro</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
The <a href="http://pomodorotechnique.com/">pomodoro technique</a> is basically about time management.  You use a
timer to break down work into intervals, traditionally 25 minutes in
length, separated by short breaks.  The following installs
<b>org-pomodoro</b> and sets up hooks to do notifications.  It also overrides
the normal org-mode <i>clock-in</i> and <i>clock-out</i> functions.  These are
normally <b>org-clock-in</b> and <b>org-clock-out</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'org-pomodoro)
(global-set-key (kbd <span style="color: #008000;">"C-c C-x C-i"</span>) 'org-pomodoro)
(global-set-key (kbd <span style="color: #008000;">"C-c C-x C-o"</span>) 'org-pomodoro)
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/notify-pomodoro</span> (title message)
  (notifications-notify
    <span style="color: #006FE0;">:title</span> title
    <span style="color: #006FE0;">:body</span> message
    <span style="color: #006FE0;">:urgency</span> 'low))

(add-hook 'org-pomodoro-finished-hook
  (<span style="color: #0000FF;">lambda</span> ()
    (sf/notify-pomodoro <span style="color: #008000;">"Pomodoro completed"</span> <span style="color: #008000;">"Time for a break"</span>)))

(add-hook 'org-pomodoro-break-finished-hook
  (<span style="color: #0000FF;">lambda</span> ()
    (sf/notify-pomodoro <span style="color: #008000;">"Break completed"</span> <span style="color: #008000;">"Ready for another?"</span>)))

(add-hook 'org-pomodoro-long-break-finished-hook
  (<span style="color: #0000FF;">lambda</span> ()
    (sf/notify-pomodoro <span style="color: #008000;">"Long break completed"</span> <span style="color: #008000;">"Ready for another?"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> Babel mode</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
This defines which languages are enabled for evaluation by org-babel.
<a href="http://ditaa.sourceforge.net/">ditaa</a> allows creation of diagrams from Emacs.  May require using emacs
<code>artist-mode</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-babel-do-load-languages
  'org-babel-load-languages
  '((ditaa . t)
    (emacs-lisp . t)
    (org . t)
    (perl . t)
    (python . t)
    (ruby . t)
    (sh . t)
   ))
</pre>
</div>

<p>
You can type =C-c '= to edit the current code block.  This will bring up
a major-mode edit buffer containing the body of the code block.  You can
then use =C-c '= again to exit.
</p>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> Exporting</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
One of the (many) nice features of org-mode is that you can export to
many different formats.  What follows is miscellaneous resources online
that discuss exporting.
</p>

<ul class="org-ul">
<li><a href="http://orgmode.org/manual/Exporting.html#Exporting">Org Mode Manual, Exporting</a>
</li>
<li><a href="http://orgmode.org/worg/org-contrib/babel/examples/article-class.html">Org-article LaTeX class</a>
</li>
<li><a href="http://home.fnal.gov/~neilsen/notebook/orgExamples/org-examples.html">Emacs org-mode examples and cookbook</a>
</li>
<li><a href="http://emacs-fu.blogspot.com/2011/04/nice-looking-pdfs-with-org-mode-and.html">Emacs Fu: Nice looking PDFs with org-mode and xetex</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Packages</h3>
<div class="outline-text-3" id="text-1-6">
<p>
This section defines all the packages I use.  It installs (if needed)
and configures them per my usage.  Sections will come and go.
</p>
</div>

<div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Emacs vi emulation</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
I have too much Vim muscle memory to let go of the keybindings.  <a href="https://gitorious.org/evil/pages/Home">evil</a>
provides an emulation mode that I find extremely useful.
</p>

<p>
While I have <span class="underline">&lt;leader&gt;</span> configured, I don't use this as much as I used
to.  I typically use <b>helm</b> or <b>ido</b> for quickly changing between
buffers.
</p>

<p>
Lastly, this also sets the initial state of some modes to <span class="underline">emacs</span> where
it makes sense.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'evil)
(sf/package-install 'evil-leader)
(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">evil</span>
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">evil-leader</span>
      <span style="color: #006FE0;">:init</span> (global-evil-leader-mode)
      <span style="color: #006FE0;">:config</span>
      (<span style="color: #0000FF;">progn</span>
        <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">evil-leader</span>
        (evil-leader/set-leader <span style="color: #008000;">","</span>)
        (evil-leader/set-key
          <span style="color: #008000;">","</span> 'sf/switch-to-last-buffer)))
    (evil-mode 1))
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">dolist</span> (mode '(bbdb-mode erc-mode fundamental-mode shell-mode calendar-mode ))
      (evil-set-initial-state mode 'emacs))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> BBDB</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
BBDB, the Big-Brother Database.  As noted elsewhere, I use <b>org-contacts</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">bbdb</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (bbdb-initialize)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-3" class="outline-4">
<h4 id="sec-1-6-3"><span class="section-number-4">1.6.3</span> Bookmarks</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
Bookmarks are a way to jump to files and other things.  They are saved
to <code>~/.emacs.d/bookmarks</code>. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x r m</td>
<td class="left">Set bookmark for visited file, at point</td>
</tr>

<tr>
<td class="left">C-x r b BMK</td>
<td class="left">Jump to bookmark named BMK</td>
</tr>

<tr>
<td class="left">C-x r l</td>
<td class="left">List all bookmarks</td>
</tr>
</tbody>
</table>

<p>
<a href="http://oremacs.com/2015/01/06/rushing-headlong/">headlong</a>: 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">headlong</span>
  <span style="color: #006FE0;">:ensure</span> headlong
 )
</pre>
</div>

<p>
<a href="http://www.emacswiki.org/emacs/BookmarkPlus">Bookmark+</a>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">bookmark+</span>
  <span style="color: #006FE0;">:ensure</span> bookmark+
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-4" class="outline-4">
<h4 id="sec-1-6-4"><span class="section-number-4">1.6.4</span> Diminish</h4>
<div class="outline-text-4" id="text-1-6-4">
<p>
Use <code>diminish</code> to clean up clutter on the modeline.  <code>use-package</code> has a
built-in mechanism to diminish a mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'diminish)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-5" class="outline-4">
<h4 id="sec-1-6-5"><span class="section-number-4">1.6.5</span> Ediff</h4>
<div class="outline-text-4" id="text-1-6-5">
<p>
I am fairly used to <b>vimdiff</b>'s behavior.  I haven't had lots of
opportunities to familiarize myself with <b>ediff</b>, but the following
kinda-sorta helps.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ediff-split-window-function 'split-window-horizontally)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-6" class="outline-4">
<h4 id="sec-1-6-6"><span class="section-number-4">1.6.6</span> Elfeed</h4>
<div class="outline-text-4" id="text-1-6-6">
<p>
<a href="https://github.com/skeeto/elfeed">Elfeed</a> is a web feed (ATOM and RSS) reader for Emacs.  At this point,
I'm just playing with elfeed.  I don't know whether it will replace my
other news-reading utility.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">elfeed</span>
  <span style="color: #006FE0;">:ensure</span> elfeed
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (setq elfeed-feeds
      '((<span style="color: #008000;">"http://codeascraft.com/feed/"</span> devops)
         (<span style="color: #008000;">"http://endlessparentheses.com/atom.xml"</span> emacs)
         (<span style="color: #008000;">"http://planet.emacsen.org/atom.xml"</span> emacs)
         (<span style="color: #008000;">"http://oremacs.com/atom.xml"</span> emacs)
         (<span style="color: #008000;">"http://xkcd.com/atom.xml"</span> comics fun)
         (<span style="color: #008000;">"https://what-if.xkcd.com/feed.atom"</span> fun)
         (<span style="color: #008000;">"http://mbork.pl/?action=rss"</span> emacs )
         (<span style="color: #008000;">"http://www.howardism.org/index.xml"</span> emacs )
         (<span style="color: #008000;">"http://kitchingroup.cheme.cmu.edu/blog/feed/atom/"</span> emacs )
         (<span style="color: #008000;">"http://planetsysadmin.com/atom.xml"</span> devops)
         (<span style="color: #008000;">"http://planet.fedoraproject.org/atom.xml"</span> linux fedora)
         (<span style="color: #008000;">"http://kernelplanet.org/rss20.xml"</span> linux )
         (<span style="color: #008000;">"http://devopsreactions.tumblr.com/rss"</span> devops fun)
         (<span style="color: #008000;">"http://planet.freedesktop.org/rss20.xml"</span> linux )
         (<span style="color: #008000;">"http://www.humansofnewyork.com/rss"</span> fun)
         (<span style="color: #008000;">"http://americasgreatoutdoors.tumblr.com/rss"</span> fun)
         ))
    (<span style="color: #0000FF;">dolist</span> (mode '(elfeed-show-mode elfeed-search-mode))
      (evil-set-initial-state mode 'emacs))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-7" class="outline-4">
<h4 id="sec-1-6-7"><span class="section-number-4">1.6.7</span> Emacsclient and server</h4>
<div class="outline-text-4" id="text-1-6-7">
<p>
This allows you to start a single Emacs process and then connect to it
via <code>emacsclient</code>.  In general, be sure to use <code>emacsclient -n</code> tells
<code>emacsclient</code> to not wait for the server to return.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(load <span style="color: #008000;">"server"</span>)
(<span style="color: #0000FF;">unless</span> (server-running-p) (server-start))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-8" class="outline-4">
<h4 id="sec-1-6-8"><span class="section-number-4">1.6.8</span> Helm</h4>
<div class="outline-text-4" id="text-1-6-8">
<p>
<a href="https://github.com/emacs-helm/helm">Helm</a> is an incremental completion and selectio narrowing framework for
Emacs.  It helps narrow your choices when searching for files, buffers,
commands, et cetera.
</p>

<ul class="org-ul">
<li><a href="http://tuhdo.github.io/helm-intro.html">Helm: A Package in a league of its own</a>
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-c ?</td>
<td class="left">Display help when in Helm session</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
The following rebinds <b>C-x c</b> to <b>C-c h</b> because the former is too close
to the command <b>C-x C-c</b>, <b>save-buffers-kill-terminal</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">helm</span>
  <span style="color: #006FE0;">:ensure</span> helm
  <span style="color: #006FE0;">:diminish</span> helm-mode
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">helm-config</span>)
    (setq 
      helm-ff-skip-boring-files t
      helm-split-window-in-side-p t
      helm-ff-file-name-history-use-recentf t)
    (global-set-key (kbd <span style="color: #008000;">"C-c h"</span>) 'helm-command-prefix)
    (global-unset-key (kbd <span style="color: #008000;">"C-x c"</span>))
    (helm-mode 1)
    (helm-autoresize-mode t))
  <span style="color: #006FE0;">:config</span>
    (define-key helm-map (kbd <span style="color: #008000;">"&lt;tab&gt;"</span>) 'helm-execute-persistent-action)
  <span style="color: #006FE0;">:bind</span> ((<span style="color: #008000;">"M-x"</span> . helm-M-x)
          (<span style="color: #008000;">"C-x C-f"</span> . helm-find-files)
          (<span style="color: #008000;">"&lt;f7&gt;"</span> . helm-recentf)
          (<span style="color: #008000;">"C-x b"</span> . helm-mini))
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-9" class="outline-4">
<h4 id="sec-1-6-9"><span class="section-number-4">1.6.9</span> Hydra - Making Emacs bindings stick around</h4>
<div class="outline-text-4" id="text-1-6-9">
<p>
<a href="https://github.com/abo-abo/hydra">Hydra</a> is a Emacs package that can be used to tie related commands into a
family of short bindings with a common prefix - aka the Hydra.
</p>

<p>
Abo Abo has some interesting posts on Hydra that demonstrate its
utility:
</p>

<ul class="org-ul">
<li><a href="http://oremacs.com/2015/02/03/one-hydra-two-hydra/">One Hydra Two Hydra Red Hydra Blue Hydra</a>
</li>
<li><a href="http://oremacs.com/2015/02/04/pre-hydra-post/">New in Hydra - :pre and :post clauses</a>
</li>
<li><a href="http://oremacs.com/2015/02/02/colorful-hydrae/">Colorful Hydras</a>
</li>
</ul>

<p>
Let's give it a shot.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">hydra</span>
  <span style="color: #006FE0;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-10" class="outline-4">
<h4 id="sec-1-6-10"><span class="section-number-4">1.6.10</span> IDO</h4>
<div class="outline-text-4" id="text-1-6-10">
<p>
A first crack at using <a href="http://www.emacswiki.org/InteractivelyDoThings">IDO</a>, aka <i>Interactively Do Things</i>.  Of
particular note, <b>ido-vertical-mode</b> is enabled again.
</p>

<p>
A few handy key-bindings when using IDO:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Keybinding</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-n</td>
<td class="left">move next through list</td>
</tr>

<tr>
<td class="left">C-p</td>
<td class="left">move to previous in list</td>
</tr>

<tr>
<td class="left">Tab</td>
<td class="left">display possible completion in buffer</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">go down inside the directory in front of list</td>
</tr>

<tr>
<td class="left">backspace</td>
<td class="left">go up to parent directory</td>
</tr>

<tr>
<td class="left">//</td>
<td class="left">go to root directory</td>
</tr>

<tr>
<td class="left">~/</td>
<td class="left">go to home directory</td>
</tr>

<tr>
<td class="left">C-f</td>
<td class="left">fall back to find file</td>
</tr>

<tr>
<td class="left">C-d</td>
<td class="left">enter Dired for directory</td>
</tr>

<tr>
<td class="left">C-j</td>
<td class="left">create new file named with text you entered</td>
</tr>

<tr>
<td class="left">C-b</td>
<td class="left">go back to buffer selection mode</td>
</tr>
</tbody>
</table>

<p>
<span class="timestamp-wrapper"><span class="timestamp">[2015-02-09 Mon]</span></span>: I disabled <b>ido</b> in favor of <b>helm</b>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">ido</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">ido-vertical-mode</span>
      <span style="color: #006FE0;">:ensure</span> t
      <span style="color: #006FE0;">:disabled</span> t
      <span style="color: #006FE0;">:init</span> (ido-vertical-mode 1))
    (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">smex</span>
      <span style="color: #006FE0;">:ensure</span> smex
      <span style="color: #006FE0;">:disabled</span> t
      <span style="color: #006FE0;">:init</span> (smex-initialize)
      <span style="color: #006FE0;">:bind</span> (<span style="color: #008000;">"M-x"</span> . smex))
    (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">flx-ido</span>
      <span style="color: #006FE0;">:ensure</span> flx-ido
      <span style="color: #006FE0;">:disabled</span> t
      <span style="color: #006FE0;">:init</span> (flx-ido-mode 1))
    (ido-mode 1)
    (ido-everywhere t)
    (setq
      ido-enable-flex-matching t
      ido-create-new-buffer 'always
      ido-use-faces nil
      ido-use-filename-at-point nil
      ido-auto-merge-work-directories-length 0))
  <span style="color: #006FE0;">:bind</span> ((<span style="color: #008000;">"&lt;f7&gt;"</span> . recentf-open-files)
          (<span style="color: #008000;">"C-x b"</span> . ido-switch-buffer))
  )
</pre>
</div>

<p>
Some possibly useful references:
</p>
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/InteractivelyDoThings">EmacsWiki IDO</a>
</li>
<li><a href="http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/">Mastering Emacs: Introduction to IDO</a>
</li>
<li><a href="http://ergoemacs.org/emacs/emacs_buffer_switching.html">ErgoEmacs: Buffer switching</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-6-11" class="outline-4">
<h4 id="sec-1-6-11"><span class="section-number-4">1.6.11</span> Instant messaging: jabber &amp; irc</h4>
<div class="outline-text-4" id="text-1-6-11">
</div><div id="outline-container-sec-1-6-11-1" class="outline-5">
<h5 id="sec-1-6-11-1"><span class="section-number-5">1.6.11.1</span> Jabber</h5>
<div class="outline-text-5" id="text-1-6-11-1">
<p>
There is a jabber package for Emacs, along with a <a href="http://emacs-jabber.sourceforge.net/manual-0.8.0/index.html">manual</a>. I'm still on
the fence as to whether I want to use this.  Regardless, here's the
necessary configuration.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">jabber</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (setq 
      jabber-account-list sf/jabber-account-alist
      jabber-history-enabled t <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">enable logging</span>
      jabber-use-global-history nil
      jabber-backlog-number 40
      jabber-backlog-days 30
      jabber-history-dir <span style="color: #008000;">"~/.local/share/logs/jabber"</span>
      jabber-alert-info-message-hooks (quote (jabber-info-libnotify jabber-info-echo jabber-info-display))
      jabber-alert-message-hooks (quote (jabber-message-notifications jabber-message-echo jabber-message-scroll))
      jabber-alert-presence-hooks (quote ()) <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">don't show anything on presence changes</span>
      jabber-alert-muc-hooks (quote (jabber-muc-notifications-personal jabber-muc-echo jabber-muc-scroll))
      )
    (<span style="color: #0000FF;">dolist</span> (mode '(jabber-chat-mode jabber-roster-mode))
      (evil-set-initial-state mode 'emacs))
    (add-hook 'jabber-post-connect-hooks 'jabber-autoaway-start)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-11-2" class="outline-5">
<h5 id="sec-1-6-11-2"><span class="section-number-5">1.6.11.2</span> IRC</h5>
<div class="outline-text-5" id="text-1-6-11-2">
<p>
Install <a href="http://www.bitlbee.org">bitlbee</a> <a href="https://github.com/unhammer/bitlbee.el">mode</a> to facilitate chatting on other networks via IRC.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'bitlbee)
</pre>
</div>

<p>
Go ahead and setup ERC.  This will also pull in TLS and <span class="underline">notifications</span>.
More information about ERC can be found at <a href="http://www.emacswiki.org/wiki/ERC">EmacsWiki</a>.  The authinfo file
has nick and password information.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">notifications</span>)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">tls</span>)
(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">erc</span>
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>

    (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">erc-match</span>
      <span style="color: #006FE0;">:config</span>
      (setq erc-track-exclude-types '(<span style="color: #008000;">"JOIN"</span> <span style="color: #008000;">"NICK"</span> <span style="color: #008000;">"PART"</span> <span style="color: #008000;">"QUIT"</span> <span style="color: #008000;">"MODE"</span>
                                       <span style="color: #008000;">"324"</span> <span style="color: #008000;">"329"</span> <span style="color: #008000;">"333"</span> <span style="color: #008000;">"353"</span> <span style="color: #008000;">"477"</span>)))

    (setq erc-modules '(autojoin autoaway button completion fill irccontrols
                         list log match menu move-to-prompt netsplit
                         networks notifications readonly ring
                         services smiley spelling stamp track))
    (erc-services-mode t)
    (setq
      erc-nick sf/erc-nick 
      erc-user-full-name sf/erc-nick
      erc-away-nickname sf/erc-away-nick
      erc-keywords sf/erc-keywords
      erc-auto-join-channels-alist sf/erc-channels-alist
      erc-insert-timestamp-function 'erc-insert-timestamp-left
      erc-timestamp-format <span style="color: #008000;">"%H:%M:%S "</span>
      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">kill buffer after channel /part</span>
      erc-kill-buffer-on-part t
      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">kill buffer for server messages after /quit</span>
      erc-kill-server-buffer-on-quit t
      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">autoaway</span>
      erc-auto-discard-away t
      erc-autoaway-use-emacs-idle t
      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">logging</span>
      erc-generate-log-file-name-function 'erc-generate-log-file-name-with-date
      erc-log-channels-directory <span style="color: #008000;">"~/.local/share/logs/erc/"</span>
      erc-log-insert-log-on-open nil
      erc-prompt-for-nickserv-password nil
      erc-save-buffer-on-part t)
    ))
</pre>
</div>

<p>
The following function will either start ERC or switch to the bufer.
See <a href="http://emacs-fu.blogspot.com/2009/06/erc-emacs-irc-client.html">http://emacs-fu.blogspot.com/2009/06/erc-emacs-irc-client.html</a>. 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/erc-connect</span> ()
  <span style="color: #036A07;">"Connect to IRC via ERC"</span>
  (interactive)
  (<span style="color: #0000FF;">when</span> (y-or-n-p <span style="color: #008000;">"Connect to freenode? "</span>)
    (erc-tls <span style="color: #006FE0;">:server</span> <span style="color: #008000;">"irc.freenode.net"</span> <span style="color: #006FE0;">:port</span> 6697))
  (<span style="color: #0000FF;">when</span> (y-or-n-p <span style="color: #008000;">"Connect to bitlbee? "</span>)
    (<span style="color: #0000FF;">progn</span>
      (<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">bitlbee</span>)
      (bitlbee-start)
      (sleep-for 2)
      (erc <span style="color: #006FE0;">:server</span> <span style="color: #008000;">"localhost"</span> <span style="color: #006FE0;">:port</span> 6667)))
  )
</pre>
</div>

<p>
Finally, add a join hook to authenticate to <i>bitlbee</i>.  This comes from
<a href="http://www.emacswiki.org/BitlBee">emacswiki</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">bitlbee-netrc-identify</span> ()
  <span style="color: #036A07;">"Auto-identify for Bitlbee channels using authinfo or netrc.</span>

<span style="color: #036A07;">   The entries that we look for in netrc or authinfo files have</span>
<span style="color: #036A07;">   their 'port' set to 'bitlbee', their 'login' or 'user' set to</span>
<span style="color: #036A07;">   the current nickname and 'server' set to the current IRC</span>
<span style="color: #036A07;">   server's name.  A sample value that works for authenticating</span>
<span style="color: #036A07;">   as user 'keramida' on server 'localhost' is:</span>

<span style="color: #036A07;">   machine localhost port bitlbee login keramida password supersecret"</span>
  (interactive)
  (<span style="color: #0000FF;">when</span> (string= (buffer-name) <span style="color: #008000;">"&amp;bitlbee"</span>)
    (<span style="color: #0000FF;">let*</span> ((secret (plist-get (nth 0 (auth-source-search <span style="color: #006FE0;">:max</span> 1
                                       <span style="color: #006FE0;">:host</span> erc-server
                                       <span style="color: #006FE0;">:user</span> (erc-current-nick)
                                       <span style="color: #006FE0;">:port</span> <span style="color: #008000;">"bitlbee"</span>))
                     <span style="color: #006FE0;">:secret</span>))
            (password (<span style="color: #0000FF;">if</span> (functionp secret)
                        (funcall secret)
                        secret)))
      (erc-message <span style="color: #008000;">"PRIVMSG"</span> (concat (erc-default-target) <span style="color: #008000;">" "</span> <span style="color: #008000;">"identify"</span> <span style="color: #008000;">" "</span> password) nil))))
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Enable the netrc authentication function for &amp;biblbee channels.</span>
(add-hook 'erc-join-hook 'bitlbee-netrc-identify)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-12" class="outline-4">
<h4 id="sec-1-6-12"><span class="section-number-4">1.6.12</span> Ledger</h4>
<div class="outline-text-4" id="text-1-6-12">
<p>
<a href="http://www.ledger-cli.org/">Ledger</a> is a double entry accounting system that can be used from the CLI
and from Emacs.  There is also a Haskell port, <a href="http://hledger.org/">hledger</a>, that is
compatible with ledger.  Hledger also has support for a web daemon that
may make data entry simpler.
</p>

<ul class="org-ul">
<li><a href="http://www.ledger-cli.org/3.0/doc/ledger3.html">Ledger 3 Documentation</a>
</li>
<li><a href="http://www.ledger-cli.org/3.0/doc/ledger-mode.html">Ledger Mode</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">ledger-mode</span>
  <span style="color: #006FE0;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-13" class="outline-4">
<h4 id="sec-1-6-13"><span class="section-number-4">1.6.13</span> magit</h4>
<div class="outline-text-4" id="text-1-6-13">
<p>
I use <a href="http://magit.github.io/">magit</a>, the emacs mode for <a href="http://git-scm.com/">git</a>.  It can be used to review diffs,
commit, push changes, and other things.  Documentation is available in
<span class="underline">info</span> and <a href="http://magit.github.io/master/magit.html">online</a>.  This also installs <a href="https://github.com/pidu/git-timemachine">git-timemachine</a>, a way of
navigating a file's history in <a href="http://git-scm.com/">git</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">magit</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:commands</span> magit-status
  <span style="color: #006FE0;">:bind</span> (<span style="color: #008000;">"C-x g"</span> . magit-status))
(sf/package-install 'git-timemachine)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-14" class="outline-4">
<h4 id="sec-1-6-14"><span class="section-number-4">1.6.14</span> Music with EMMS</h4>
<div class="outline-text-4" id="text-1-6-14">
<p>
<a href="https://www.gnu.org/software/emms/manual/index.html">EMMS</a> is a multimedia system for Emacs.  I only want it as a way to
interact with <a href="http://www.musicpd.org/">MPD</a>.  I commented the blob out, but left it here for
posterity.  Work needed includes: key-bindings and browser-mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(require 'emms-setup)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(require 'emms-player-mpd)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(require 'emms-playing-time)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(require 'emms-playlist-mode)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(emms-playing-time 1)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(setq</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">emms-player-mpd-server-name "localhost"</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">emms-player-mpd-music-directory "~/mpd/Music"</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(add-to-list 'emms-player-list 'emms-player-mpd)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(add-to-list 'emms-info-functions 'emms-info-mpd)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-15" class="outline-4">
<h4 id="sec-1-6-15"><span class="section-number-4">1.6.15</span> Powerline</h4>
<div class="outline-text-4" id="text-1-6-15">
<p>
One way to get a fancy modeline.  Disabled for now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">powerline</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:init</span> (powerline-default-theme))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-16" class="outline-4">
<h4 id="sec-1-6-16"><span class="section-number-4">1.6.16</span> Terminals</h4>
<div class="outline-text-4" id="text-1-6-16">
<p>
References on the subject of running terminals in Emacs:
</p>

<ul class="org-ul">
<li><a href="http://www.masteringemacs.org/article/running-shells-in-emacs-overview">Running Shells in Emacs</a>
</li>
</ul>

<p>
Pull in <b>multi-term</b> and set <b>bash</b> as the default shell.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">multi-term</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:init</span>
  (setq multi-term-program <span style="color: #008000;">"/bin/bash"</span>)
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-17" class="outline-4">
<h4 id="sec-1-6-17"><span class="section-number-4">1.6.17</span> Tmux integration</h4>
<div class="outline-text-4" id="text-1-6-17">
<p>
<a href="https://github.com/syohex/emacs-emamux">Emamux</a> allows you to interact with tmux from Emacs.  Should be
interesting to try, but have yet to hit on a use-case.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">emamux</span>
  <span style="color: #006FE0;">:ensure</span> emamux)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-18" class="outline-4">
<h4 id="sec-1-6-18"><span class="section-number-4">1.6.18</span> Twitter</h4>
<div class="outline-text-4" id="text-1-6-18">
<p>
<a href="https://github.com/hayamiz/twittering-mode">Twittering</a> is a major mode that allows access to Twitter.  You can start
<b>twittering</b> with <code>M-x twit</code>.  
</p>

<p>
Keybindings of interest:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">g</td>
<td class="left">Update current timeline</td>
</tr>

<tr>
<td class="left">V</td>
<td class="left">Open or switch timeline</td>
</tr>

<tr>
<td class="left">u</td>
<td class="left">Post tweet</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">Post reply to pointed tweet</td>
</tr>

<tr>
<td class="left">C-c RET</td>
<td class="left">Post organic retweet</td>
</tr>

<tr>
<td class="left">C-u C-c RET</td>
<td class="left">Post official retweet</td>
</tr>

<tr>
<td class="left">d</td>
<td class="left">Send direct message</td>
</tr>

<tr>
<td class="left">C-c C-w</td>
<td class="left">Delete the pointed tweet</td>
</tr>

<tr>
<td class="left">0</td>
<td class="left">Go to beginning of line</td>
</tr>

<tr>
<td class="left">^</td>
<td class="left">Go to beginning of text on the line</td>
</tr>

<tr>
<td class="left">$</td>
<td class="left">Go to end of the line</td>
</tr>

<tr>
<td class="left">G</td>
<td class="left">Go to bottom tweet</td>
</tr>

<tr>
<td class="left">H</td>
<td class="left">Go to top tweet</td>
</tr>

<tr>
<td class="left">h</td>
<td class="left">Move cursor left</td>
</tr>

<tr>
<td class="left">j</td>
<td class="left">Go to next tweet</td>
</tr>

<tr>
<td class="left">k</td>
<td class="left">Go to previous tweet</td>
</tr>

<tr>
<td class="left">l</td>
<td class="left">Move cursor right</td>
</tr>

<tr>
<td class="left">n</td>
<td class="left">Go to next tweet by the author</td>
</tr>

<tr>
<td class="left">p</td>
<td class="left">Go to previous tweet by author</td>
</tr>

<tr>
<td class="left">TAB</td>
<td class="left">Go to next thing (link, user, URL)</td>
</tr>

<tr>
<td class="left">M-TAB</td>
<td class="left">Go to previous thing</td>
</tr>

<tr>
<td class="left">C-v / SPC</td>
<td class="left">Scroll buffer upward</td>
</tr>

<tr>
<td class="left">M-v / &lt;backspace</td>
<td class="left">Scroll buffer downward</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">twittering-mode</span>
  <span style="color: #006FE0;">:ensure</span> twittering-mode
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (setq
      twittering-icon-mode nil
      twittering-use-master-password t
      twittering-private-info-file <span style="color: #008000;">"~/.emacs.d/user/twittering-mode.gpg"</span>
      )
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6-19" class="outline-4">
<h4 id="sec-1-6-19"><span class="section-number-4">1.6.19</span> Window Management</h4>
<div class="outline-text-4" id="text-1-6-19">
<p>
<a href="https://github.com/abo-abo/ace-window">ace-window</a> is a mechanism to quickly switch between windows in an Emacs
frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">ace-window</span> <span style="color: #006FE0;">:ensure</span> ace-window)
</pre>
</div>

<p>
<a href="http://www.emacswiki.org/emacs/TransposeFrame">Transpose Frame</a> is a utility to quickly transpose the arrangement of
windows in the current frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">transpose-frame</span> <span style="color: #006FE0;">:ensure</span> transpose-frame)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> General configuration</h3>
<div class="outline-text-3" id="text-1-7">
<p>
And finally, we get to general configuration of Emacs.  ;-)
</p>
</div>

<div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Basics</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
Use UTF-8 as the default locale.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8)
</pre>
</div>

<p>
Define format for line numbers on the side, when <b>linum-mode</b> is
enabled.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq linum-format <span style="color: #008000;">"%4d"</span>)
</pre>
</div>

<p>
Turn on highlighting of current line.  See Emacs manual on <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Cursor-Display.html">Cursor Display</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-hl-line-mode 1)
</pre>
</div>

<p>
Skip the splash screen &#x2026;
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq inhibit-splash-screen t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Backups</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
By default, Emacs will save backup files in the current directory.  This
will litter <code>~</code> files everywhere.  The following will store them in
<code>~/.emacs.d/backups</code>.  If need be, they can be found via <code>C-x C-f
(find-file)</code>.
</p>

<p>
This will keep a large number of backups.  <code>delete-old-versions</code> will
prevent trimming of backup versions.  <code>version-control</code> makes numeric
backup versions unconditionally.  Lastly, <code>auto-save-file-name-transforms</code>
will make filenames unique when saved in the backup directory.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">sf/emacs-autosave-directory</span>
  (concat user-emacs-directory <span style="color: #008000;">"backups/"</span>)
  <span style="color: #036A07;">"This variable dictates where to put auto saves. It is set to a</span>
<span style="color: #036A07;">    directory called backups located in your .emacs.d/ directory."</span>)

(setq
  backup-directory-alist `((<span style="color: #008000;">".*"</span> . ,sf/emacs-autosave-directory))
  auto-save-file-name-transforms `((<span style="color: #008000;">".*"</span> ,sf/emacs-autosave-directory t))
  delete-old-versions -1
  version-control t
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> Saving and History</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
Save commands and their history.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq savehist-file <span style="color: #008000;">"~/.emacs.d/savehist"</span>)
(savehist-mode 1)
(setq savehist-save-minibuffer-history 1)
(setq savehist-additional-variables
  '(kill-ring search-ring regexp-search-ring))
</pre>
</div>

<p>
The following will control <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Auto-Save-Control.html">auto-save</a> behavior.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-save-timeout 120)
(setq auto-save-interval 1000)
</pre>
</div>

<p>
With Emacs 24.4, the following will allow you to use the
<span class="underline">focus-out-hook</span> for different things.  My preference here is to
instruct Emacs to save buffers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">when</span> (version&lt;= <span style="color: #008000;">"24.4"</span> emacs-version)
  (add-hook 'focus-out-hook 'sf/save-all))
</pre>
</div>

<p>
Some sort of alternative would be nice.  I tried
<code>mouse-leave-buffer-hook</code>, but that fires more often than I'd like.  It
is important to remember that buffer != X11 window.  The old idea of
running <code>sf/save-all</code> on a schedule is not that great either.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84;">;;  </span><span style="color: #8D8D84; font-style: italic;">(add-hook 'mouse-leave-buffer-hook 'sf/save-all)</span>
</pre>
</div>

<p>
Lastly, enable <b>undo-tree-mode</b>.  You can visualize the changes with
<code>C-x u</code> (<code>undo-tree-visualize</code>).
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">undo-tree</span>
  <span style="color: #006FE0;">:defer</span> t
  <span style="color: #006FE0;">:diminish</span> undo-tree-mode
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (global-undo-tree-mode)
    (setq
      undo-tree-visualizer-timestamps t
      undo-tree-visualizer-diff t)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-4" class="outline-4">
<h4 id="sec-1-7-4"><span class="section-number-4">1.7.4</span> Appearance</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
A few things when in graphical mode:
</p>
<ul class="org-ul">
<li>Disable the toolbar and scroll bar.
</li>
<li>Enable <a href="http://www.nyan.cat/">Nyan Cat</a> <a href="https://github.com/TeMPOraL/nyan-mode">nyan mode</a>!
</li>
<li>Install <a href="https://julien.danjou.info/projects/emacs-packages">rainbow mode</a> to <i>colorize color names in buffers</i>.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'nyan-mode)
(sf/package-install 'rainbow-mode)
(<span style="color: #0000FF;">when</span> (display-graphic-p)
  (tool-bar-mode -1)
<span style="color: #8D8D84;">;  </span><span style="color: #8D8D84; font-style: italic;">(set-scroll-bar-mode 'right)</span>
  (scroll-bar-mode -1)
  (nyan-mode)
  )
</pre>
</div>

<p>
Activate syntax highlighting.  See <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Font-Lock.html">Font Lock</a> in the Emacs manual.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">font-lock</span>)
(global-font-lock-mode 1)
(setq font-lock-use-default-colors t)
</pre>
</div>

<p>
Add some information to the mode line: line, column, battery remaining,
and the time.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq line-number-mode t)
(setq column-number-mode t)
(setq display-battery-mode t)
(setq display-time-24hr-format t)
(display-battery-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-5" class="outline-4">
<h4 id="sec-1-7-5"><span class="section-number-4">1.7.5</span> Themes</h4>
<div class="outline-text-4" id="text-1-7-5">
<p>
This installs and enables an Emacs theme.  I try out different themes on
a regular basis, but have been partial to <a href="http://ethanschoonover.com/solarized">Solarized</a> for a long time.
More about Emacs themes can be read in the manual on <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Custom-Themes.html">custom-themes</a>.
This only loads the theme if there is graphical display present.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">dolist</span> (p '(gruvbox-theme leuven-theme material-theme
             naquadah-theme solarized-theme
             color-theme-sanityinc-tomorrow
             spacegray-theme ample-theme
             professional-theme tronesque-theme))
  (<span style="color: #0000FF;">progn</span> (sf/package-install p)))
(<span style="color: #0000FF;">when</span> (display-graphic-p)
  (load-theme 'leuven t))
</pre>
</div>

<p>
More information about themes can be found at EmacsWiki:
</p>

<p>
<a href="http://www.emacswiki.org/emacs/ColorTheme">http://www.emacswiki.org/emacs/ColorTheme</a>
</p>

<p>
This includes installing a theme for one buffer (<code>M-x
color-theme-buffer-local</code>) or for a specific frame.  You can also toggle
between day/night (light/dark) themes.
</p>
</div>
</div>

<div id="outline-container-sec-1-7-6" class="outline-4">
<h4 id="sec-1-7-6"><span class="section-number-4">1.7.6</span> Fonts</h4>
<div class="outline-text-4" id="text-1-7-6">
<p>
Lastly, let's set the font and size.  For awhile, I've been comfortable
with <span class="underline">Inconsolata</span>.  An alternative to this is <span class="underline">DejaVu Sans Mono</span>.
</p>

<p>
This is taken from <a href="http://www.wisdomandwonder.com/wordpress/wp-content/uploads/2014/03/C3F.html#sec-11-3">C3F</a> section on fonts.
</p>

<p>
This used to bind <b>C-=</b> to <b>sf/font-size-increase</b> and <b>C--</b> to
<b>sf/font-size-decrease</b>.  With <i>Emacs-24.4</i>, this didn't work anymore.
While it would be prudent to investigate why, I discovered that <b>C-x
C-=</b>, <b>C-x C--</b>, and <b>C-x C-0</b> are bound to <b>text-scale-adjust</b>.  This
will increase, decrease, and reset the font size.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defconst</span> <span style="color: #BA36A5;">sf/font-base</span> <span style="color: #008000;">"DejaVu Sans Mono"</span> <span style="color: #036A07;">"Preferred font"</span>)
(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">sf/font-size</span> 10 <span style="color: #036A07;">"Preferred font size"</span>)
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/font-ok-p</span> ()
  <span style="color: #036A07;">"Is configured font valid?"</span>
  (interactive)
  (member sf/font-base (font-family-list)))
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/font-name</span> ()
  <span style="color: #036A07;">"Compute font name and size string"</span>
  (interactive)
  (<span style="color: #0000FF;">let*</span> ((size (number-to-string sf/font-size))
          (name (concat sf/font-base <span style="color: #008000;">"-"</span> size)))
    name))
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/font-size-increase</span> ()
  <span style="color: #036A07;">"Increase font size"</span>
  (interactive)
  (setq sf/font-size (+ sf/font-size 1))
  (sf/font-update))
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/font-size-decrease</span> ()
  <span style="color: #036A07;">"Decrease font size"</span>
  (interactive)
  (setq sf/font-size (- sf/font-size 1))
  (sf/font-update))
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">sf/font-update</span> ()
  <span style="color: #036A07;">"Update font configuration"</span>
  (interactive)
  (<span style="color: #0000FF;">if</span> (sf/font-ok-p)
    (<span style="color: #0000FF;">progn</span>
      (message <span style="color: #008000;">"Setting font to: %s"</span> (sf/font-name))
      (set-default-font (sf/font-name)))))
(sf/font-update)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-7" class="outline-4">
<h4 id="sec-1-7-7"><span class="section-number-4">1.7.7</span> Behavior</h4>
<div class="outline-text-4" id="text-1-7-7">
</div><div id="outline-container-sec-1-7-7-1" class="outline-5">
<h5 id="sec-1-7-7-1"><span class="section-number-5">1.7.7.1</span> Buffers</h5>
<div class="outline-text-5" id="text-1-7-7-1">
<p>
Use <code>uniquify</code> to make two (or more) buffers open with the same file
name distinguishable.  The configuration below tries to best match the
full path name.  Try to ignore special buffers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">uniquify</span>)
(setq 
  uniquify-buffer-name-style 'forward
  uniquify-separator <span style="color: #008000;">"/"</span>
  uniquify-ignore-buffers-re <span style="color: #008000;">"^\\*"</span>
  uniquify-after-kill-buffer-p t)
</pre>
</div>

<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-03-04 Wed]</span></span> Drop <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Iswitchb.html">iswitchb</a> as it is deprecated.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-7-7-2" class="outline-5">
<h5 id="sec-1-7-7-2"><span class="section-number-5">1.7.7.2</span> Windows</h5>
<div class="outline-text-5" id="text-1-7-7-2">
<p>
I used to use <span class="underline">switch-window</span> to navigate between windows.  Nowadays, I
use either <code>helm</code> or the <code>hydra</code> below.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(sf/package-install 'switch-window)
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(use-package switch-window</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">:bind ("C-x o" . switch-window)</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">:init</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">(progn (setq switch-window-shortcut-style 'alphabet)))</span>
</pre>
</div>

<p>
This is my preferred mechanism to navigate between windows.  It uses
<code>hydra</code>, <code>ace-window</code>, and <code>windmove</code> (among others).  This is taken
from <a href="http://oremacs.com/2015/02/04/pre-hydra-post/">oremacs.com</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key
  (kbd <span style="color: #008000;">"C-M-o"</span>)
  (defhydra hydra-window ()
    <span style="color: #008000;">"window"</span>
    (<span style="color: #008000;">"h"</span> windmove-left)
    (<span style="color: #008000;">"j"</span> windmove-down)
    (<span style="color: #008000;">"k"</span> windmove-up)
    (<span style="color: #008000;">"l"</span> windmove-right)
    (<span style="color: #008000;">"v"</span> (<span style="color: #0000FF;">lambda</span> ()
           (interactive)
           (split-window-right)
           (windmove-right)) <span style="color: #008000;">"vert"</span>)
    (<span style="color: #008000;">"x"</span> (<span style="color: #0000FF;">lambda</span> ()
           (interactive)
           (split-window-below)
           (windmove-down)) <span style="color: #008000;">"horz"</span>)
    (<span style="color: #008000;">"t"</span> transpose-frame <span style="color: #008000;">"'"</span>)
    (<span style="color: #008000;">"o"</span> delete-other-windows <span style="color: #008000;">"one"</span> <span style="color: #006FE0;">:color</span> blue)
    (<span style="color: #008000;">"a"</span> ace-window <span style="color: #008000;">"ace"</span>)
    (<span style="color: #008000;">"s"</span> ace-swap-window <span style="color: #008000;">"swap"</span>)
    (<span style="color: #008000;">"d"</span> ace-delete-window <span style="color: #008000;">"del"</span>)
    (<span style="color: #008000;">"i"</span> ace-maximize-window <span style="color: #008000;">"ace-one"</span> <span style="color: #006FE0;">:color</span> blue)
    (<span style="color: #008000;">"b"</span> ido-switch-buffer <span style="color: #008000;">"buf"</span>)
    (<span style="color: #008000;">"m"</span> headlong-bookmark-jump <span style="color: #008000;">"bmk"</span>)
    (<span style="color: #008000;">"q"</span> nil <span style="color: #008000;">"cancel"</span>)))
</pre>
</div>

<p>
I'm not using <code>ace-jump</code> at this time.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84;">;  </span><span style="color: #8D8D84; font-style: italic;">(sf/package-install 'ace-jump-mode)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-7-3" class="outline-5">
<h5 id="sec-1-7-7-3"><span class="section-number-5">1.7.7.3</span> Mouse</h5>
<div class="outline-text-5" id="text-1-7-7-3">
<p>
The following tries to smooth out mouse scrolling so that it isn't so
jumpy.  There are a couple references:
</p>

<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a>
</li>
<li><a href="http://stackoverflow.com/questions/3631220/fix-to-get-smooth-scrolling-in-emacs">http://stackoverflow.com/questions/3631220/fix-to-get-smooth-scrolling-in-emacs</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq 
  scroll-step 1               <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">keyboard scroll one line at a time</span>
  scroll-conservatively 10000
  scroll-preserve-screen-position 1
  mouse-wheel-follow-mouse 't <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">scroll window under mouse</span>
  mouse-wheel-progressive-speed nil     <span style="color: #8D8D84;">;;  </span><span style="color: #8D8D84; font-style: italic;">don't accelerate scrolling</span>
  mouse-wheel-scroll-amount '(1 ((shift) . 1))) <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">one line at a time</span>
</pre>
</div>

<p>
Autoselect the window with the mouse pointer.  This is effectively
<i>focus-follows-mouse</i>, but for windows in an Emacs frame.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-autoselect-window t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-7-4" class="outline-5">
<h5 id="sec-1-7-7-4"><span class="section-number-5">1.7.7.4</span> General</h5>
<div class="outline-text-5" id="text-1-7-7-4">
<p>
In general, use spaces instead of tabs.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default indent-tabs-mode nil)
</pre>
</div>

<p>
This defines where values are set if you use Customize.  My preference
is to configure things here or in <span class="underline">init.el</span>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file (concat user-emacs-directory <span style="color: #008000;">"custom.el"</span>))
(<span style="color: #0000FF;">when</span> (file-exists-p custom-file)
  (load custom-file))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-7-7-5" class="outline-5">
<h5 id="sec-1-7-7-5"><span class="section-number-5">1.7.7.5</span> <span class="done DONE">DONE</span> Making opening files easier</h5>
<div class="outline-text-5" id="text-1-7-7-5">
<p>
Emacs provides a mode called <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Conveniences.html">recentf-mode</a> that will track files you
open.  When you call <code>recentf-open-files</code>, it will present a numbered
list and you can then select the file to open.  <a href="http://ergoemacs.org/">ErgoEmacs</a> also discusses
how to configure <a href="http://ergoemacs.org/emacs/emacs_recentf.html">recentf-mode</a>.
</p>

<p>
The following enables <code>recentf-mode</code> and binds <b>F7</b> to <code>helm-recentf</code>.
It also limits the maximum number of items in the <code>recentf</code> menu.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(recentf-mode t)
(setq recentf-max-menu-items 25)
(global-set-key (kbd <span style="color: #008000;">"&lt;f7&gt;"</span>) 'helm-recentf)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7-7-6" class="outline-5">
<h5 id="sec-1-7-7-6"><span class="section-number-5">1.7.7.6</span> Helpers</h5>
<div class="outline-text-5" id="text-1-7-7-6">
<p>
Define a hydra to start/switch between applications.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key
  (kbd <span style="color: #008000;">"&lt;f9&gt;"</span>)
  (defhydra hydra-app-selector (<span style="color: #006FE0;">:color</span> blue)
    <span style="color: #008000;">"application"</span>
    (<span style="color: #008000;">"e"</span> notmuch <span style="color: #008000;">"email"</span>)
    (<span style="color: #008000;">"r"</span> elfeed <span style="color: #008000;">"elfeed"</span>)
    (<span style="color: #008000;">"t"</span> twit <span style="color: #008000;">"twitter"</span>)
    (<span style="color: #008000;">"j"</span> jabber-connect-all <span style="color: #008000;">"jabber"</span>)
    (<span style="color: #008000;">"s"</span> ansi-term <span style="color: #008000;">"shell"</span>)
    )
  )
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Programming and Editing</h3>
<div class="outline-text-3" id="text-1-8">
</div><div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> Basics</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
Show matching parenthesis.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(show-paren-mode t)
</pre>
</div>

<p>
I want a final newline to be added to a file when it is about to be
saved.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default require-final-newline t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-2" class="outline-4">
<h4 id="sec-1-8-2"><span class="section-number-4">1.8.2</span> Lisp</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
A default offset of 2 seems to make sense for lisp.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq lisp-indent-offset 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-3" class="outline-4">
<h4 id="sec-1-8-3"><span class="section-number-4">1.8.3</span> Lua</h4>
<div class="outline-text-4" id="text-1-8-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">lua-mode</span>
  <span style="color: #006FE0;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-4" class="outline-4">
<h4 id="sec-1-8-4"><span class="section-number-4">1.8.4</span> Markdown</h4>
<div class="outline-text-4" id="text-1-8-4">
<p>
Help Emacs grok when to trigger <i>markdown-mode</i> when editing certain
files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">markdown-mode</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.md\\'"</span> . markdown-mode))
    (add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.markdown\\'"</span> . markdown-mode))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-5" class="outline-4">
<h4 id="sec-1-8-5"><span class="section-number-4">1.8.5</span> Python</h4>
<div class="outline-text-4" id="text-1-8-5">
<p>
Turn on <b>linum-mode</b> when editing Python files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'python-mode-hook 'linum-mode)
(add-hook 'python-mode-hook 'sf/whitespace)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-6" class="outline-4">
<h4 id="sec-1-8-6"><span class="section-number-4">1.8.6</span> Shell scripts</h4>
<div class="outline-text-4" id="text-1-8-6">
<p>
Also turn on <b>linum-mode</b> for shell scripts.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'shell-script-mode 'linum-mode)
(add-hook 'shell-script-mode 'sf/whitespace)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-7" class="outline-4">
<h4 id="sec-1-8-7"><span class="section-number-4">1.8.7</span> Text</h4>
<div class="outline-text-4" id="text-1-8-7">
<p>
Use auto-fill and set a column width to 72.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook 'turn-on-auto-fill)
(add-hook 'text-mode-hook
  '(<span style="color: #0000FF;">lambda</span>() (set-fill-column 72)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-8" class="outline-4">
<h4 id="sec-1-8-8"><span class="section-number-4">1.8.8</span> YAML</h4>
<div class="outline-text-4" id="text-1-8-8">
<p>
A helper mode when editing <a href="http://yaml.org/">YAML</a> files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">yaml-mode</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (setq yaml-indent-offset 2)
    (add-hook 'yaml-mode-hook 'linum-mode)
    (add-hook 'yaml-mode-hook 'sf/whitespace)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-8-9" class="outline-4">
<h4 id="sec-1-8-9"><span class="section-number-4">1.8.9</span> JSON</h4>
<div class="outline-text-4" id="text-1-8-9">
<p>
A helper mode when editing <i>JSON</i>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">json-mode</span>
  <span style="color: #006FE0;">:ensure</span> t
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (add-hook 'json-mode-hook 'linum-mode)
    (add-hook 'json-mode-hook 'sf/whitespace)
    )
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Mail configuration</h3>
<div class="outline-text-3" id="text-1-9">
</div><div id="outline-container-sec-1-9-1" class="outline-4">
<h4 id="sec-1-9-1"><span class="section-number-4">1.9.1</span> General</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
I tend to try several different mail clients over time.  This includes
typical GUI clients and Emacs-based clients.  Sometimes the client
behavior is enough at odds at what I want and I don't want to bother
forcing it the way I work.  The following sets up some basics for when
using Emacs for mail.  First and foremost, Use the <code>message-user-agent</code>
for composing email.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
  mail-user-agent 'message-user-agent
  mail-from-style 'angles
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-2" class="outline-4">
<h4 id="sec-1-9-2"><span class="section-number-4">1.9.2</span> Sending email</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
Send email via SMTP instead of using a local sendmail binary.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-send-mail-function 'smtpmail-send-it)
</pre>
</div>

<p>
Set up <code>message-mode</code>.  This will kill the buffer after sending an email
and set preferences for message citation and how to forward an
email. For more on configuring Emacs <code>message-mode</code>, see the <a href="https://www.gnu.org/software/emacs/manual/html_mono/message.html">manual</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-kill-buffer-on-exit t
  message-citation-line-format <span style="color: #008000;">"On %a, %Y-%m-%d at %T %z, %N wrote:"</span>
  message-citation-line-function (quote message-insert-formatted-citation-line)
  message-make-forward-subject-function (quote message-forward-subject-fwd)
  message-signature t
  message-signature-file <span style="color: #008000;">"~/.signature"</span>
  )
</pre>
</div>

<p>
Enable certain modes for <b>message-mode</b>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'message-mode-hook 'footnote-mode)
(add-hook 'message-mode-hook 'turn-on-flyspell)
</pre>
</div>

<p>
The following configures default SMTP settings for <code>smtpmail</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq
  smtpmail-stream-type 'ssl
  smtpmail-smtp-server sf/smtp-server
  smtpmail-smtp-service 465
  smtpmail-smtp-user sf/smtp-user
  )
</pre>
</div>

<p>
Be sure to use an encrypted <i>authinfo</i> file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq smtpmail-auth-credentials <span style="color: #008000;">"~/.authinfo.gpg"</span>)
</pre>
</div>

<p>
Use <i>dired</i> to attach files to <i>notmuch</i> messages.  
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">gnus-dired</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-3" class="outline-4">
<h4 id="sec-1-9-3"><span class="section-number-4">1.9.3</span> Mutt</h4>
<div class="outline-text-4" id="text-1-9-3">
<p>
If I'm using <i>mutt</i>, I want the related buffers to behave as if they are
email-related. 
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"/tmp/mutt.*"</span> . message-mode))
(add-hook 'message-mode-hook
  'turn-on-auto-fill
  (<span style="color: #0000FF;">lambda</span>()
    (auto-fill-mode t)
    (setq fill-column 72)
    (setq mail-header-separator <span style="color: #008000;">""</span>)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-4" class="outline-4">
<h4 id="sec-1-9-4"><span class="section-number-4">1.9.4</span> Multiple identities</h4>
<div class="outline-text-4" id="text-1-9-4">
<p>
One day, perhaps, I will want to use multiple accounts (ie. identities)
when sending email via Emacs.  Much of this was taken from <a href="http://notmuchmail.org/emacstips/#index17h2">notmuch
emacstips</a>.  You can find <code>gnus-alias.el</code> on <a href="http://www.emacswiki.org/emacs/gnus-alias.el">emacswiki</a>.
</p>

<p>
<code>gnus-alias-identity</code> takes a lot of arguments.  They are briefly
described below.
</p>

<ol class="org-ol">
<li>Account nickname
</li>
<li>Other identity it may refer to
</li>
<li>Sender address
</li>
<li>Organization header
</li>
<li>Extra headers
</li>
<li>Extra body text
</li>
<li>Signature file
</li>
</ol>

<pre class="example">
(setq gnus-alias-identity alist
  '(("gmail" nil "Joe Smith &lt;jsmith@example.net&gt;" nil nil nil nil))
  )
</pre>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq gnus-alias-identity-alist sf/gnus-alias-alist)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-5" class="outline-4">
<h4 id="sec-1-9-5"><span class="section-number-4">1.9.5</span> offlineimap</h4>
<div class="outline-text-4" id="text-1-9-5">
<p>
This is a mode to run <a href="http://offlineimap.org/">offlineimap</a> from.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">offlineimap</span>
  <span style="color: #006FE0;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-6" class="outline-4">
<h4 id="sec-1-9-6"><span class="section-number-4">1.9.6</span> notmuch</h4>
<div class="outline-text-4" id="text-1-9-6">
<p>
<a href="http://notmuchmail.org/">notmuch</a> is basically a mail indexer.  It helps you to better tame your
inbox with search, tagging, and other functions.  There is a CLI
interface to interact with your email in Maildir format.  Or, you can
use the Emacs notmuch client front-end. 
</p>

<p>
If you want to follow development more closely than one's distribution,
the following will checkout and build source on RedHat derived
distributions.
</p>

<pre class="example">
$ git clone git://notmuchmail.org/git/notmuch
$ sudo yum install offlineimap xapian-core-devel \
  gmime-devel libtalloc-devel gcc gcc-c++
$ ./configure --prefix /usr/local &amp;&amp; make &amp;&amp; sudo make install
</pre>

<p>
Define various keybindings.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">notmuch</span>
  <span style="color: #006FE0;">:ensure</span> notmuch
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (setq
      gnus-inhibit-images t
      notmuch-archive-tags '(<span style="color: #008000;">"-inbox"</span> <span style="color: #008000;">"-unread"</span> <span style="color: #008000;">"+archive"</span>)
      notmuch-crypto-process-mime t
      notmuch-fcc-dirs sf/notmuch-fcc-dirs
      notmuch-hello-thousands-separator <span style="color: #008000;">","</span>
      notmuch-search-oldest-first nil
      notmuch-show-part-button-default-action 'notmuch-show-view-part
      notmuch-saved-searches '(
                                (<span style="color: #008000;">"inbox"</span> . <span style="color: #008000;">"tag:inbox"</span>)
                                (<span style="color: #008000;">"today"</span> . <span style="color: #008000;">"date:today..now and not tag:archive"</span>)
                                (<span style="color: #008000;">"7 days"</span> . <span style="color: #008000;">"date:7d..now and not tag:archive"</span>)
                                (<span style="color: #008000;">"announce"</span> . <span style="color: #008000;">"tag:announce and not tag:archive and tag:unread"</span>)
                                (<span style="color: #008000;">"reports"</span> . <span style="color: #008000;">"tag:reports"</span>)
                                (<span style="color: #008000;">"lists"</span> . <span style="color: #008000;">"tag:lists and not tag:archive"</span>)
                                (<span style="color: #008000;">"noc active"</span> . <span style="color: #008000;">"tag:noc and not tag:archive"</span>)
                                )
      )
    (<span style="color: #0000FF;">when</span> (not (string= system-name sf/work-workstation))
      (setq notmuch-command <span style="color: #008000;">"~/bin/notmuch-remote.sh"</span>))
    (add-to-list 'auto-mode-alist '(<span style="color: #008000;">"notmuch-raw-id"</span> . markdown-mode))
    (add-hook 'notmuch-hello-mode-hook 'sf/nolinum)
    (add-hook 'notmuch-show-hook '(<span style="color: #0000FF;">lambda</span> () (setq show-trailing-whitespace nil)))
    (<span style="color: #0000FF;">dolist</span> (mode '(notmuch-search notmuch-show notmuch-help))
      (evil-set-initial-state mode 'emacs))
    )
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (define-key notmuch-show-mode-map (kbd <span style="color: #008000;">"d"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"mark message for trash"</span>
        (interactive)
        (notmuch-show-add-tag '(<span style="color: #008000;">"+trash"</span> <span style="color: #008000;">"-inbox"</span> <span style="color: #008000;">"-unread"</span>))
        (<span style="color: #0000FF;">unless</span> (notmuch-show-next-open-message)
          (notmuch-show-next-thread t))))
    (define-key notmuch-search-mode-map (kbd <span style="color: #008000;">"d"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"mark message for trash"</span>
        (interactive)
        (notmuch-search-tag (list <span style="color: #008000;">"+trash"</span> <span style="color: #008000;">"-inbox"</span> <span style="color: #008000;">"-unread"</span>))
        (notmuch-search-next-thread )))
    (define-key notmuch-show-mode-map (kbd <span style="color: #008000;">"j"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"mark message as junk"</span>
        (interactive)
        (notmuch-show-add-tag (list <span style="color: #008000;">"+spam"</span> <span style="color: #008000;">"-inbox"</span> <span style="color: #008000;">"-unread"</span>))
        (<span style="color: #0000FF;">unless</span> (notmuch-show-next-open-message)
          (notmuch-show-next-thread t))))
    (define-key notmuch-show-mode-map (kbd <span style="color: #008000;">"F"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"star message"</span>
        (interactive)
        (notmuch-show-add-tag (list <span style="color: #008000;">"+flagged"</span>))))
    (define-key notmuch-search-mode-map (kbd <span style="color: #008000;">"F"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        <span style="color: #036A07;">"star thread"</span>
        (interactive)
        (notmuch-search-tag (list <span style="color: #008000;">"+flagged"</span>))))
    (define-key notmuch-show-mode-map   (kbd <span style="color: #008000;">"TAB"</span>) 'notmuch-show-toggle-message)
    (define-key notmuch-search-mode-map (kbd <span style="color: #008000;">"g"</span>) 'notmuch-refresh-this-buffer)
    (define-key notmuch-hello-mode-map  (kbd <span style="color: #008000;">"g"</span>) 'notmuch-refresh-this-buffer)
    )
  )
</pre>
</div>

<p>
Last, but not least, enable linking to messages from org-mode.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">org-notmuch</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-7" class="outline-4">
<h4 id="sec-1-9-7"><span class="section-number-4">1.9.7</span> mu4e</h4>
<div class="outline-text-4" id="text-1-9-7">
<p>
<a href="http://www.djcbsoftware.nl/code/mu/mu4e.html">mu4e</a> is a emacs-frontend to <a href="http://www.djcbsoftware.nl/code/mu/">mu</a>, a tool for managing email in <a href="http://cr.yp.to/proto/maildir.html">Maildir</a>
format.  Similar to notmuch, it requires other tools to pull down (eg
offlineimap) and send (eg. smtpmail) your email.  It has an online
<a href="http://www.djcbsoftware.nl/code/mu/mu4e/">manual</a>.
</p>

<p>
The first thing to do is build the index:
</p>

<blockquote>
<p>
$ mu index &#x2013;maildir ~/Maildir
</p>
</blockquote>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">my-mu4e-set-account</span> ()
  <span style="color: #036A07;">"Set the account for composing a message."</span>
  (<span style="color: #0000FF;">let*</span> ((account
           (<span style="color: #0000FF;">if</span> mu4e-compose-parent-message
             (<span style="color: #0000FF;">let</span> ((maildir (mu4e-message-field mu4e-compose-parent-message <span style="color: #006FE0;">:maildir</span>)))
               (string-match <span style="color: #008000;">"/</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">.*?</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">/"</span> maildir)
               (match-string 1 maildir))
             (completing-read (format <span style="color: #008000;">"Compose with account: (%s) "</span>
                                (mapconcat #'(<span style="color: #0000FF;">lambda</span> (var) (car var))
                                  sf/mu4e-account-alist <span style="color: #008000;">"/"</span>))
               (mapcar #'(<span style="color: #0000FF;">lambda</span> (var) (car var)) sf/mu4e-account-alist)
               nil t nil nil (car sf/mu4e-account-alist))))
          (account-vars (cdr (assoc account sf/mu4e-account-alist))))
    (<span style="color: #0000FF;">if</span> account-vars
      (mapc #'(<span style="color: #0000FF;">lambda</span> (var)
                (set (car var) (cadr var)))
        account-vars)
      (<span style="color: #ff0000; font-weight: bold;">error</span> <span style="color: #008000;">"No email account found"</span>))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">mu4e</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">mu4e-contrib</span>)
    (setq
      mu4e-attachment-dir <span style="color: #008000;">"~/Downloads"</span>
      mu4e-html2text-command 'mu4e-shr2text
      mu4e-use-fancy-chars t
      mu4e-get-mail-command <span style="color: #008000;">"true"</span>
      mu4e-bookmarks
       '((<span style="color: #008000;">"flag:unread AND NOT flag:trashed"</span> <span style="color: #008000;">"Unread messages"</span> ?u)
         (<span style="color: #008000;">"date:today..now"</span> <span style="color: #008000;">"Today's messages"</span> ?t)
         (<span style="color: #008000;">"date:7d..now"</span> <span style="color: #008000;">"Last 7 days"</span> ?w)
         (<span style="color: #008000;">"mime:text/calendar"</span> <span style="color: #008000;">"Meeting invites"</span> ?c)
         (<span style="color: #008000;">"mime:image/*"</span> <span style="color: #008000;">"Messages with images"</span> ?p)
         (<span style="color: #008000;">"from:cisco.com OR to:cisco.com"</span> <span style="color: #008000;">"Cisco"</span> ?i)
         (<span style="color: #008000;">"from:level3.com OR to:level3.com"</span> <span style="color: #008000;">"Level3"</span> ?l )
         (<span style="color: #008000;">"from:comcast.com OR to:comcast.com"</span> <span style="color: #008000;">"Comcast"</span> ?C)
         (<span style="color: #008000;">"from:centurylink.com OR to:centurylink.com"</span> <span style="color: #008000;">"Centurylink"</span> ?L)
         (<span style="color: #008000;">"from:ftr.com OR to:ftr.com"</span> <span style="color: #008000;">"Frontier"</span> ?F)
         (<span style="color: #008000;">"from:Internet2"</span> <span style="color: #008000;">"Internet2"</span> ?I)
         (<span style="color: #008000;">"from:lsnetworks.net OR to:lsnetworks.net"</span> <span style="color: #008000;">"LSN"</span> ?Z))
      mu4e-compose-signature-auto-include nil
      mu4e-view-scroll-to-next nil     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">do not advance to next message when scolling</span>
      mu4e-sent-folder   <span style="color: #008000;">"/.Sent"</span>       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">folder for sent messages</span>
      mu4e-drafts-folder <span style="color: #008000;">"/.Drafts"</span>     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">unfinished messages</span>
      mu4e-trash-folder  <span style="color: #008000;">"/.Trash"</span>      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">trashed messages</span>
      mu4e-refile-folder <span style="color: #008000;">"/.Archives"</span>)  <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">saved messages</span>
    (<span style="color: #0000FF;">when</span> (not (string= system-name sf/work-workstation))
      (setq
        mu4e-get-mail-command <span style="color: #008000;">"offlineimap"</span>
        mu4e-maildir       <span style="color: #008000;">"~/Maildir"</span>   <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">top-level Maildir</span>
        mu4e-sent-folder   <span style="color: #008000;">"/Work/Sent"</span>       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">folder for sent messages</span>
        mu4e-drafts-folder <span style="color: #008000;">"/Work/Drafts"</span>     <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">unfinished messages</span>
        mu4e-trash-folder  <span style="color: #008000;">"/Work/Trash"</span>      <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">trashed messages</span>
        mu4e-refile-folder <span style="color: #008000;">"/Work/Archives"</span>)   <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">saved messages</span>
      (add-hook 'mu4e-compose-pre-hook 'my-mu4e-set-account))
    )
  )
</pre>
</div>
</div>
</div>



<div id="outline-container-sec-1-9-8" class="outline-4">
<h4 id="sec-1-9-8"><span class="section-number-4">1.9.8</span> vm</h4>
<div class="outline-text-4" id="text-1-9-8">
<p>
<a href="http://www.emacswiki.org/emacs/CategoryViewMail">ViewMail</a>, aka VM, is a mail package for Emacs.  Development is hosted on
<a href="https://launchpad.net/vm">Launchpad</a>.  There is also a <a href="http://news.gmane.org/gmane.emacs.viewmail">discussion list</a>.  The Emacs Wiki has some
useful pointers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">vm</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:config</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">vcard</span>)
    (setq
      vm-imap-account-alist sf/vm-imap-alist
      vm-imap-folder-cache-directory <span style="color: #008000;">"~/.local/share/imap-cache/"</span>
      vm-visible-headers '(<span style="color: #008000;">"From:"</span>
                            <span style="color: #008000;">"To:"</span>
                            <span style="color: #008000;">"Apparently-To:"</span>
                            <span style="color: #008000;">"Cc:"</span>
                            <span style="color: #008000;">"Subject:"</span>
                            <span style="color: #008000;">"Date:"</span>
                            <span style="color: #008000;">"^Replay-To:"</span>
                            <span style="color: #008000;">"Resent-From:"</span>
                            <span style="color: #008000;">"Resent-To:"</span>)
      vm-primary-inbox sf/primary
      vm-circular-folders nil
      vm-confirm-new-folders t
      vm-mutable-windows nil
      vm-forwarding-subject-format <span style="color: #008000;">"Fwd: %s"</span>
      vm-digest-send-type <span style="color: #008000;">"mime"</span>
      vm-forwarding-digest-type <span style="color: #008000;">"mime"</span>
      vm-move-after-deleting t
      vm-move-after-undeleting nil
      vm-delete-after-saving t
      vm-delete-after-archiving t
      vm-delete-after-bursting t
      vm-enable-addons '(check-recipients check-for-empty-subject encode-headers)
      vm-highlighted-header-regexp <span style="color: #008000;">"From:</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">To:</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">C[Cc]:</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">Subject:"</span>
      <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">deal with mime and html</span>
      vm-mail-prompt-if-subject-empty t
      vm-assimilate-html-command <span style="color: #008000;">"striptags"</span>
      vm-mime-default-face-charsets t <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">just show all and let emacs deal with it</span>
      vm-mime-default-face-charset-exceptions '()
      vm-mime-internal-content-types t
      vm-mime-external-content-types-alist '(
                                              (<span style="color: #008000;">"application/pdf"</span> <span style="color: #008000;">"evince"</span>)
                                              (<span style="color: #008000;">"application/rtf"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              (<span style="color: #008000;">"application/msword"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              (<span style="color: #008000;">"application/vnd.oasis.opendocument.text"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              (<span style="color: #008000;">"application/vnd.oasis.opendocument.text-template"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              (<span style="color: #008000;">"application/vnd.oasis.opendocument.spreadsheet"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              (<span style="color: #008000;">"application/vnd.oasis.opendocument.presentation"</span> <span style="color: #008000;">"libreoffice"</span>)
                                              )
      vm-mime-text/html-handler 'auto-select
      <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">vm-mime-text/html-handler 'shr ; maybe one day</span>
      vm-mime-text/html-blocker <span style="color: #008000;">"&lt;img[</span><span style="color: #008000;">^</span><span style="color: #008000;">&gt;]*\\s-src=."</span>
      vm-mime-attachment-source-directory (expand-file-name <span style="color: #008000;">"~/"</span>)
      <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">control window and frame behavior</span>
      vm-mutable-windows t
      vm-mutable-frames nil
      vm-frame-per-completion nil
      vm-frame-per-composition t
      vm-frame-per-edit nil
      vm-frame-per-folder nil
      vm-frame-per-summary nil
      vm-summary-format <span style="color: #008000;">"%n%a%* %y-%-3.3m %2d %H %-20.20F %4l %I%s\n"</span>
      vm-mime-attachment-save-directory <span style="color: #008000;">"~/Downloads"</span>
      vm-included-text-attribution-format <span style="color: #008000;">"On %w, %y-%m-%d at %h (%z), %F wrote:"</span>
      vm-reply-subject-prefix <span style="color: #008000;">"Re: "</span>
      )
    (define-key vm-mode-map <span style="color: #008000;">"r"</span> 'vm-reply-include-text)
    (define-key vm-mode-map <span style="color: #008000;">"R"</span> 'vm-followup-include-text)
    (define-key vm-mode-map <span style="color: #008000;">"f"</span> 'vm-forward-message)
    (define-key vm-mode-map <span style="color: #008000;">"c"</span> 'vm-visit-imap-folder)
    (define-key vm-mode-map <span style="color: #008000;">"k"</span> nil)
    (define-key vm-mode-map <span style="color: #008000;">"K"</span> 'vm-kill-subject)
    (<span style="color: #0000FF;">dolist</span> (mode '(vm-summary-mode vm-presentation-mode))
      (evil-set-initial-state mode 'emacs))
    (add-hook 'vm-presentation-mode-hook
      (<span style="color: #0000FF;">lambda</span> ()
        (visual-line-mode 1)
        (setq word-wrap 1)
        (setq line-move-visual t)))
    ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-9" class="outline-4">
<h4 id="sec-1-9-9"><span class="section-number-4">1.9.9</span> gnus</h4>
<div class="outline-text-4" id="text-1-9-9">
<p>
<a href="http://www.gnus.org/manual/gnus_toc.html">Gnus</a> is a built-in message reader for Emacs.  It supports reading and
composing both mail and news.  The <a href="http://www.gnus.org/manual/gnus_toc.html">manual</a> is available online.  There
are lots and lots of posts online about configuring <b>Gnus</b>.  Much of
this is influenced by:
</p>

<ul class="org-ul">
<li><a href="http://www.cataclysmicmutation.com/2010/11/multiple-gmail-accounts-in-gnus/">Multiple GMail Accounts in Gnus</a>
</li>
<li><a href="http://blog.binchen.org/posts/notes-on-using-gnus.html">Practical guide to use Gnus with Gmail</a>
</li>
<li><a href="https://github.com/pierre-lecocq/qsdfgh.com/blob/master/articles/gnus-configuration-example.org">https://github.com/pierre-lecocq/qsdfgh.com/blob/master/articles/gnus-configuration-example.org</a>
</li>
</ul>

<p>
A note regarding terminology:  Gnus uses the term <i>archiving</i> to
describe the method for storing mail you send. 
</p>

<p>
This enables searching of IMAP based accounts.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">nnir</span>)
</pre>
</div>

<p>
Highlights on miscellaneous points from the manual:
</p>

<ul class="org-ul">
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/gnus/Archived-Messages.html">Archived messages</a> (aka the Sent mail folder)
</li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/gnus/Expiring-Mail.html#Expiring-Mail">Expiring mail</a>
</li>
</ul>

<p>
Accounts and other sources of reading material.  The first sets the
default method for fetching articles.  This also sets <i>secondary</i>
methods, which happens to be IMAP.
</p>

<p>
Generally speaking, it is hard for me to get past treating email as
news.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">use-package</span> <span style="color: #D0372D;">gnus</span>
  <span style="color: #006FE0;">:disabled</span> t
  <span style="color: #006FE0;">:commands</span> gnus
  <span style="color: #006FE0;">:init</span>
  (<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">nnir</span>)
    (setq gnus-select-method '(nntp <span style="color: #008000;">"news.gmane.org"</span>))
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">http://www.gnus.org/manual/gnus_397.html</span>
    (add-to-list 'gnus-secondary-select-methods
      '(nnimap <span style="color: #008000;">"work"</span>
         (nnimap-address sf/nnimap-address)
         (nnimap-server-port 993)
         (nnimap-stream tls)
         (nnimap-authinfo-file <span style="color: #008000;">"~/.authinfo.gpg"</span>)
         (nnir-search-engine imap)
         )
      )
    (setq gnus-agent t
      gnus-gcc-mark-as-read t
      gnus-message-archive-group <span style="color: #008000;">"Sent"</span>
      gnus-sum-thread-tree-indent          <span style="color: #008000;">" "</span>
      gnus-sum-thread-tree-single-indent   <span style="color: #008000;">"&#9678; "</span>
      gnus-sum-thread-tree-root            <span style="color: #008000;">"&#9679; "</span>
      gnus-sum-thread-tree-false-root      <span style="color: #008000;">"&#9734;"</span>
      gnus-sum-thread-tree-vertical        <span style="color: #008000;">"&#9474;"</span>
      gnus-sum-thread-tree-leaf-with-other <span style="color: #008000;">"&#9500;&#9472;&#9658; "</span>
      gnus-sum-thread-tree-single-leaf     <span style="color: #008000;">"&#9584;&#9472;&#9658; "</span>
      gnus-single-article-buffer nil
      gnus-summary-display-arrow t
      gnus-summary-thread-gathering-function 'gnus-gather-threads-by-subject
      gnus-thread-ignore-subject t
      <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">http://www.gnus.org/manual/big-gnus.html#Summary-Buffer-Lines</span>
      gnus-user-date-format-alist '(
                                     ((gnus-seconds-today) . <span style="color: #008000;">"Today, %H:%M"</span>)
                                     ((+ 86400 (gnus-seconds-today)) . <span style="color: #008000;">"Yesterday, %H:%M"</span>)
                                     (604800 . <span style="color: #008000;">"%A %H:%M"</span>) <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">that's one week</span>
                                     ((gnus-seconds-month) . <span style="color: #008000;">"%A %d"</span>)
                                     ((gnus-seconds-year) . <span style="color: #008000;">"%B %d"</span>)
                                     (t . <span style="color: #008000;">"%B %d '%y"</span>))
      gnus-summary-line-format <span style="color: #008000;">"%U%R%z %(%&amp;user-date;  %-15,15f  %B%s%)\n"</span>

      gnus-parameters '(
                         (<span style="color: #008000;">"work"</span>
                           <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">@see http://www.gnu.org/software/emacs/manual/html_node/gnus/Expiring-Mail.html</span>
                           <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">press 'E' to expire email</span>
<span style="color: #8D8D84;">;                           </span><span style="color: #8D8D84; font-style: italic;">(expiry-wait 90)</span>
<span style="color: #8D8D84;">;                           </span><span style="color: #8D8D84; font-style: italic;">(expiry-target "nnimap+work:Trash")</span>
                           (posting-style
                             (gcc <span style="color: #008000;">"nnimap+work:Sent"</span>)
                             (address sf/email-work))
                           (expiry-wait . never)
                           (display . all))
                         )
      )
    <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">http://www.gnus.org/manual/big-gnus.html#Group-Topics</span>
    (add-hook 'gnus-group-mode-hook 'gnus-topic-mode)
    )
  )
</pre>
</div>
</div>

<div id="outline-container-sec-1-9-9-1" class="outline-5">
<h5 id="sec-1-9-9-1"><span class="section-number-5">1.9.9.1</span> Group buffer</h5>
<div class="outline-text-5" id="text-1-9-9-1">
<p>
Gnus starts in the <a href="http://www.gnus.org/manual/gnus_15.html#SEC15">group buffer</a>.  This lists subscribed groups.  For an
email account, this would be email folders.  Type <b>L</b> to see all groups,
including those with no unread articles.  Type <b>l</b> to see only
subscribed groups with unread articles.  Type <b>g</b> to refresh the
subscribed groups.
</p>
</div>
</div>

<div id="outline-container-sec-1-9-9-2" class="outline-5">
<h5 id="sec-1-9-9-2"><span class="section-number-5">1.9.9.2</span> Server buffer</h5>
<div class="outline-text-5" id="text-1-9-9-2">
<p>
The Gnus <a href="http://www.gnus.org/manual/gnus_159.html#SEC159">server buffer</a> can be entered via <b>^</b>
(<b>gnus-group-enter-server-mode</b>).  Gnus uses backends (eg nnimap) to
connect to real servers.  The server buffer is a way to view the
backends in use.
</p>
</div>
</div>

<div id="outline-container-sec-1-9-9-3" class="outline-5">
<h5 id="sec-1-9-9-3"><span class="section-number-5">1.9.9.3</span> Summary buffer</h5>
<div class="outline-text-5" id="text-1-9-9-3">
<p>
The Gnus <a href="http://www.gnus.org/manual/gnus_59.html#SEC59">summary buffer</a> will show the messages for a given group.  Think
of it as emails in a folder.  Type <b>SPACE</b> to view the currently
selected article.  Type <b>=</b> (<b>gnus-summary-expand-window</b>) to close the
article view and only display the summary.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Le Fin</h3>
<div class="outline-text-3" id="text-1-10">
<p>
The end.  Send a message so that the user knows it has been completely
loaded.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(message <span style="color: #008000;">"%s"</span> <span style="color: #008000;">"Finished loading config"</span>)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Stephen Fromm</p>
<p class="date">Created: 2015-04-03 Fri 13:49</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
