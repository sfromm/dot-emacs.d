#+TITLE: Navigation
#+PROPERTY: header-args :tangle ~/.emacs.d/site-lisp/setup-navigation.el

* Navigation

Navigation here has several meanings.  There's navigation that covers
movement within a buffer, between windows, and between frames.

* Ivy, Avy, and Swiper

[[https://github.com/abo-abo/swiper][swiper]] gives you an overview as you search for a regex. *Counsel* is a
collection of *Ivy*-enhanced versions of common Emacs commands.

#+BEGIN_SRC emacs-lisp
  (use-package swiper
    :ensure swiper
    :diminish ivy-mode
    :init
    (progn
      (use-package counsel :ensure t)
      (define-key ivy-minibuffer-map (kbd "<tab>") 'ivy-alt-done)
      (ivy-mode 1)
      (setq ivy-use-virtual-buffers t)
      )
    :bind (
            ("C-s" . swiper)
            ("C-c f" . counsel-git)
            )
    )
#+END_SRC

[[https://github.com/abo-abo/avy][avy]] is a package for jumping to visible text using a char-based decision
tree.

#+BEGIN_SRC emacs-lisp
  (use-package avy
    :ensure t
    :bind (
            ("M-g g" . avy-goto-line)
            ("M-s" . avy-goto-word-1)
            )
    )
#+END_SRC

* Dump Jump

[[https://github.com/jacktasia/dumb-jump][Dump Jump]] is an Emacs /jump to definition/ package with support for
multiple languages that favors "it just works". It should work wih
minimal configuration and no stored indexes, TAGS files, or similar
things.

#+BEGIN_SRC emacs-lisp
  (use-package dumb-jump
    :bind
    (("M-g o" . dumb-jump-go-other-window)
      ("M-g j" . dumb-jump-go)
      ("M-g i" . dumb-jump-go-prompt)
      ("M-g x" . dumb-jump-go-prefer-external)
      ("M-g z" . dumb-jump-go-prefer-external-other-window))
    :config
    (setq dumb-jump-selector 'ivy))
#+END_SRC

* Movement

#+BEGIN_SRC emacs-lisp
  (defhydra sf/navigate (:foreign-keys run)
    "[Navigate] or q to exit"
    ("a" beginning-of-line)
    ("e" end-of-line)
    ("l" forward-char)
    ("h" backward-char)
    ("n" next-line)
    ("j" next-line)
    ("p" previous-line)
    ("k" previous-line)
    ("d" View-scroll-half-page-forward)
    ("u" View-scroll-half-page-backward)
    ("SPC" scroll-up-command)
    ("S-SPC" scroll-down-command)
    ("<" beginning-of-buffer)
    (">" end-of-buffer)
    ("." end-of-buffer)
    ("C-'" nil)
    ("q" nil :exit t))

  (global-set-key (kbd "C-c n") 'sf/navigate/body)
#+END_SRC

* Postamble

Offer module for use.

#+BEGIN_SRC emacs-lisp
(provide 'setup-navigation)
#+END_SRC

* License

This document is licensed under the GNU Free Documentation License
version 1.3 or later (http://www.gnu.org/copyleft/fdl.html).

#+BEGIN_SRC 
Copyright (C) 2017 Stephen Fromm

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.

Code in this document is free software: you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation, either
version 3 of the License, or (at your option) any later version.

This code is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
#+END_SRC
